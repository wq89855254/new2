{"remainingRequest":"D:\\program\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\program\\frontend\\src\\views\\shorttime\\shorttime.js?vue&type=script&lang=js&","dependencies":[{"path":"D:\\program\\frontend\\src\\views\\shorttime\\shorttime.js","mtime":1553855602514},{"path":"D:\\program\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\program\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _slicedToArray from \"D:\\\\program\\\\frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/slicedToArray\";\nimport \"core-js/modules/es6.array.fill\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.regexp.split\";\nimport _parseInt from \"D:\\\\program\\\\frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/parse-int\";\nimport _JSON$stringify from \"D:\\\\program\\\\frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/json/stringify\";\nimport _objectSpread from \"D:\\\\program\\\\frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport * as moment from \"moment\";\nimport * as axios from \"axios\";\nimport _ from 'lodash';\nimport { DateSelect, LevelSelect, AreaSelect, WholeAgingSelect, TimeSelect, AgingSelect, ImgShow, SideBar } from \"../../components/share\";\nimport { ToolBtn } from '../../components/base';\nimport options from \"../../assets/config/shorttime_config\";\nimport { createNamespacedHelpers } from \"vuex\";\n\nvar _createNamespacedHelp = createNamespacedHelpers(\"synthesis\"),\n    mapState = _createNamespacedHelp.mapState,\n    mapGetters = _createNamespacedHelp.mapGetters,\n    mapMutations = _createNamespacedHelp.mapMutations;\n\nexport default {\n  name: \"Shorttime\",\n  components: {\n    DateSelect: DateSelect,\n    LevelSelect: LevelSelect,\n    AreaSelect: AreaSelect,\n    WholeAgingSelect: WholeAgingSelect,\n    TimeSelect: TimeSelect,\n    AgingSelect: AgingSelect,\n    ImgShow: ImgShow,\n    SideBar: SideBar,\n    ToolBtn: ToolBtn\n  },\n  data: function data() {\n    return {\n      // 该引用存储短期所有配置\n      options: options,\n      cancelRequests: [],\n      activeIndex: null,\n      currDate: null,\n      zoomSw: false,\n      currHour: '02',\n      hourList: ['02', '05', '08', '11', '14', '17', '20', '23'],\n      interval: '24h',\n      area: \"全国\",\n      areaList: [{\n        label: \"全国\",\n        value: \"全国\",\n        disabled: false\n      }, {\n        label: \"华北\",\n        value: \"华北\",\n        disabled: false\n      }, {\n        label: \"东北\",\n        value: \"东北\",\n        disabled: false\n      }, {\n        label: \"华东\",\n        value: \"华东\",\n        disabled: false\n      }, {\n        label: \"华南\",\n        value: \"华南\",\n        disabled: false\n      }, {\n        label: \"西南\",\n        value: \"西南\",\n        disabled: false\n      }, {\n        label: \"西北\",\n        value: \"西北\",\n        disabled: false\n      }, {\n        label: \"青藏\",\n        value: \"青藏\",\n        disabled: false\n      }, {\n        label: \"新疆\",\n        value: \"新疆\",\n        disabled: false\n      }, {\n        label: \"近海\",\n        value: \"近海\",\n        disabled: false\n      }],\n      // 当前选中的预报类型\n      currFcstName: \"多模式预报\",\n      // 该引用当前选中的要素配置\n      currEleOption: null,\n      // 该引用当前预报配置\n      currFcstOption: null,\n      // 该引用含有当前起报时间以及当前选中要素的id\n      currTypeOption: null,\n      // 当前选中路径下的所有要素id的列表\n      currEleIdList: [],\n      // 图片地址\n      imgPaths: [],\n      coverPaths: [],\n      dieSwitch: false,\n      activeClose: false\n    };\n  },\n  watch: {\n    imgPaths: function imgPaths() {\n      this.updata_zoomUrl(this.imgPaths[0]);\n    },\n    area: function area() {\n      this.onConditionChange();\n    }\n  },\n  computed: _objectSpread({}, mapState([\"zoomSwitch\", \"zoomUrl\"]), {\n    // 当前起报时间\n    startTime: function startTime() {\n      if (this.currTypeOption && moment.isMoment(this.currTypeOption.date)) {\n        return this.currTypeOption.date.format('YYYY-MM-DD') + ' ' + this.currTypeOption.hour;\n      }\n\n      return '';\n    },\n    currEleIdListLength: function currEleIdListLength() {\n      return this.currEleIdList.length;\n    }\n  }),\n  created: function created() {\n    this.debouncedFindCondition = _.debounce(this.findCondition, 300);\n  },\n  mounted: function mounted() {\n    this.findCondition();\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.cancelAllRequest();\n  },\n  methods: _objectSpread({\n    moment: moment\n  }, mapMutations([\"updata_zoomSwitch\", \"updata_zoomUrl\"]), {\n    close: function close() {\n      this.updata_zoomSwitch(false);\n    },\n    highChange: function highChange(val) {\n      this.currEleOption.activeLevel = val;\n      this.onConditionChange();\n    },\n    select: function select(i) {\n      this.activeClose = !this.activeClose;\n\n      if (this.activeIndex == i) {\n        if (!this.activeClose) {\n          this.activeIndex = null;\n          this.dieSwitch = false; // alert(options[0].contents[0].hour)\n\n          this.currHour = options[0].contents[0].hour;\n          this.loginzt = false;\n          this.coverPaths = [];\n          this.activeClose = false;\n        }\n      } else {\n        // let value=JSON.parse(JSON.stringify(options[0].contents[0].date))\n        this.currHour = options[0].contents[0].hour;\n        this.currDate = moment(JSON.parse(_JSON$stringify(options[0].contents[0].date)));\n\n        if (i == 1) {\n          this.loginzt = true;\n          this.dieFn(this.interval, moment(this.currDate).add(this.currHour, 'hour').format('YYYY-MM-DD HH:mm:ss'));\n        } else {\n          this.loginFn(this.interval, moment(this.currDate).add(this.currHour, 'hour').format('YYYY-MM-DD HH:mm:ss')); // this.login_switch=true\n\n          this.loginzt = false;\n        }\n\n        this.activeIndex = i;\n      }\n    },\n    changDate: function changDate(i) {\n      var time = moment(this.currDate.format('YYYYMMDD 00:00:00'), 'YYYYMMDD HH:mm:ss').add(this.currHour, 'hours');\n\n      if (i === 1) {\n        time.add(_parseInt(this.activeIndex == 1 ? this.interval : 1), 'hours');\n      } else {\n        time.subtract(_parseInt(this.activeIndex == 1 ? this.interval : 1), 'hours');\n      }\n\n      this.currDate = time;\n      this.currHour = time.format('HH');\n\n      if (this.activeIndex == 2) {\n        this.loginFn(this.interval, moment(this.currDate).format('YYYY-MM-DD HH:mm:ss'));\n      } else if (this.activeIndex == 1) {\n        this.dieFn(this.interval, moment(this.currDate).format('YYYY-MM-DD HH:mm:ss'));\n      } // this.$emit('dieFn',this.interval,moment(this.currDate).format('YYYY-MM-DD HH:mm:ss'))\n\n    },\n    changeHour: function changeHour() {\n      if (this.activeIndex == 1) {\n        this.dieFn(this.interval, moment(this.currDate).format('YYYY-MM-DD HH:mm:ss'));\n      } else {\n        this.loginFn(this.interval, moment(this.currDate).add(this.currHour, 'hour').format('YYYY-MM-DD HH:mm:ss'));\n      }\n    },\n    dieFn: function dieFn(interval, date) {\n      var _this = this;\n\n      // console.log(interval)\n      this.coverPaths = []; // document.querySelector('.imgDie').innerHTML = ''\n      // console.log(interval, date)\n\n      if (interval && date) {\n        this.dieSwitch = true;\n        var data = {\n          'modeName': 'qiangtianqi',\n          'eleName': \"OBSoverlay:\\u5B9E\\u51B5\\u53E0\\u52A0:\".concat(interval),\n          'forecastTime': date,\n          'level': '',\n          'userDefinedParas': '',\n          'strTime': date,\n          'symbol': 1\n        };\n        var params = new URLSearchParams();\n\n        for (var key in data) {\n          params.append(key, data[key]);\n        }\n\n        axios.post(\"/proxy/10.20.67.111/PictureInfoForgetFilePath.action\", params).then(function (res) {\n          // console.log(res.data.path.split(','))\n          _this.coverPaths.push(\"http://10.20.67.111/getPic.action2?ppath=\".concat(res.data.path.split(',')[5]));\n        });\n      } else {\n        this.dieSwitch = false;\n      }\n    },\n    loginFn: function loginFn(interval, date) {\n      var _this2 = this;\n\n      // if (this.loginzt) {\n      this.coverPaths = []; // document.querySelector('.imgDie').innerHTML = ''\n      // console.log(interval, date)\n\n      if (interval && date) {\n        this.dieSwitch = true;\n        var data = {\n          'modeName': 'qiangtianqi',\n          'eleName': \"forecastoverlay:\\u9884\\u62A5\",\n          'forecastTime': moment(date, 'YYYY-MM-DD HH:mm:ss').add(_parseInt(this.interval), 'hour').format('YYYY-MM-DD HH:mm:ss'),\n          'level': '',\n          'userDefinedParas': '',\n          'strTime': date,\n          'symbol': 2\n        };\n        var params = new URLSearchParams();\n\n        for (var key in data) {\n          params.append(key, data[key]);\n        }\n\n        axios.post(\"/proxy/10.20.67.111/PictureInfoForgetFilePath.action\", params).then(function (res) {\n          // console.log(res.data.path.split(','))\n          _this2.coverPaths.push(\"http://10.20.67.111/getPic.action2?ppath=\".concat(res.data.path.split(',')[5]));\n        });\n      }\n    },\n    // 键盘事件监听\n    onKeyup: function onKeyup(event) {\n      var _this3 = this;\n\n      var code = event.code;\n\n      if (code === 'ArrowLeft') {\n        this.$refs.wholeAgingSelect[0].onTuningAging(-1);\n      } else if (code === 'ArrowRight') {\n        this.$refs.wholeAgingSelect[0].onTuningAging(1);\n      } else if (code === 'ArrowUp' || code === 'ArrowDown') {\n        var activeElementId = '';\n        var isProb = this.currFcstName === '概率预报';\n\n        if (isProb) {\n          activeElementId = this.options.find(function (el) {\n            return el.fcstName === _this3.currFcstName;\n          }).activeElementId;\n        } else {\n          activeElementId = this.currTypeOption.activeElementId;\n        }\n\n        var currIndex = this.currEleIdList.findIndex(function (id) {\n          return id === activeElementId;\n        });\n        if (currIndex === -1) return;\n        var nextIndex = currIndex + (code === 'ArrowUp' ? -1 : 1);\n\n        if (nextIndex <= 0) {\n          nextIndex = this.currEleIdListLength - 1;\n        } else if (nextIndex >= this.currEleIdListLength) {\n          nextIndex = 0;\n        }\n\n        var nextActiveElementId = this.currEleIdList[nextIndex];\n\n        if (isProb) {\n          this.options.find(function (el) {\n            return el.fcstName === _this3.currFcstName;\n          }).activeElementId = nextActiveElementId;\n        } else {\n          this.currTypeOption.activeElementId = nextActiveElementId;\n        }\n\n        this.debouncedFindCondition();\n      }\n    },\n    // 图片切换事件\n    onSwitchImg: function onSwitchImg(sign) {\n      if (sign === 'left') {\n        this.$refs.wholeAgingSelect[0].onTuningAging(-1);\n      } else if (sign === 'right') {\n        this.$refs.wholeAgingSelect[0].onTuningAging(1);\n      } else if (sign === 'top') {\n        this.$refs.levelSelect.onTuningLevel(1);\n      } else if (sign === 'bottom') {\n        this.$refs.levelSelect.onTuningLevel(-1);\n      }\n    },\n    // 条件改变时\n    onConditionChange: function onConditionChange() {\n      this.debouncedFindCondition();\n    },\n    //点击要素时\n    onClickElement: function onClickElement(curr, itemId) {\n      if (curr.activeElementId === itemId) return;\n      curr.activeElementId = itemId;\n      this.debouncedFindCondition();\n    },\n    // 点击条件时\n    onClickCondition: function onClickCondition(curr, itemName) {\n      if (curr.activeConditionName === itemName) return;\n      curr.activeConditionName = itemName;\n      this.debouncedFindCondition();\n    },\n    // 寻找选中的条件\n    findCondition: function findCondition() {\n      var _this4 = this;\n\n      var currFcst = this.options.find(function (el) {\n        return el.fcstName === _this4.currFcstName;\n      });\n      this.currfcst = currFcst; // console.log(currFcst);\n\n      var id = currFcst.id;\n      this.currFcstOption = currFcst; // 多模式预报\n\n      if (id === \"manyPattern\") {\n        var currContent = currFcst.contents.find(function (el) {\n          return el.typeName === currFcst.activeTypeName;\n        });\n        currContent.contents.forEach(function (content) {\n          content.sections.forEach(function (section) {\n            section.items.forEach(function (el) {\n              if (el.id === currContent.activeElementId) {\n                _this4.currEleOption = el;\n                _this4.currTypeOption = currContent;\n                _this4.currEleIdList = content.sections.reduce(function (curr, el) {\n                  return curr.concat(el.items.map(function (el) {\n                    return el.id;\n                  }));\n                }, []); // console.log(this.currEleIdList);\n                // console.log(currContent.typeName);\n                // console.log(currContent.date);\n                // console.log(currContent.hour);\n                // console.log(el.name);\n                // console.log(el);\n                // body处理\n\n                var strTime = '';\n\n                if (currContent.date) {\n                  strTime = currContent.date.format('YYYY-MM-DD') + ' ' + currContent.hour + ':00:00';\n                }\n\n                var forecastTime = '';\n\n                if (strTime) {\n                  forecastTime = moment(strTime, 'YYYY-MM-DD HH:mm:ss').add(+currFcst.aging, 'hours').format('YYYY-MM-DD HH:mm:ss');\n                }\n\n                var eleName = ['forecast', _this4.area, currContent.name, el.name].join(':');\n                var body = {\n                  modeName: 'qiangtianqi',\n                  eleName: eleName,\n                  forecastTime: forecastTime,\n                  level: el.activeLevel,\n                  userDefinedParas: '',\n                  strTime: strTime // 有起报时间 与 无起报时间(即第一次请求)\n\n                };\n\n                if (strTime) {\n                  if (currContent.isStability === true) {\n                    //当稳定性为true\n                    _this4.requestStabilityImgPath(body, currContent);\n                  } else {\n                    _this4.requestImgPath(body);\n                  }\n                } else {\n                  _this4.requestImgPath(body, currContent, currFcst);\n                }\n              }\n            });\n          });\n        });\n      } else if (id === \"gather\") {\n        //集合预报\n        var _currContent = currFcst.contents.find(function (el) {\n          return el.typeName === currFcst.activeTypeName;\n        });\n\n        var mss = [];\n\n        _currContent.conditions.forEach(function (el) {\n          mss.push(el.activeConditionName);\n        });\n\n        _currContent.elementContents.forEach(function (elementContent) {\n          elementContent.sections.forEach(function (section) {\n            section.elements.forEach(function (el) {\n              if (el.id === _currContent.activeElementId) {\n                _this4.currEleOption = el;\n                _this4.currTypeOption = _currContent;\n                _this4.currEleIdList = elementContent.sections.reduce(function (curr, el) {\n                  return curr.concat(el.elements.map(function (el) {\n                    return el.id;\n                  }));\n                }, []); // console.log(this.currEleIdList);\n                // console.log(currContent.typeName);\n                // console.log(currContent.date);\n                // console.log(currContent.hour);\n                // console.log(el.name);\n                // body处理\n\n                var strTime = '';\n\n                if (_currContent.date) {\n                  strTime = _currContent.date.format('YYYY-MM-DD') + ' ' + _currContent.hour + ':00:00';\n                }\n\n                var forecastTime = '';\n\n                if (strTime) {\n                  forecastTime = moment(strTime, 'YYYY-MM-DD HH:mm:ss').add(+currFcst.aging, 'hours').format('YYYY-MM-DD HH:mm:ss');\n                }\n\n                var eleName = ['集合预报', _currContent.name, el.name, mss.join(',')].join(':');\n                var body = {\n                  modeName: 'qiangtianqi',\n                  eleName: eleName,\n                  forecastTime: forecastTime,\n                  level: el.activeLevel,\n                  userDefinedParas: '',\n                  strTime: strTime // 有起报时间 与 无起报时间\n\n                };\n\n                if (strTime) {\n                  _this4.requestImgPath(body);\n                } else {\n                  _this4.requestImgPath(body, _currContent, currFcst);\n                }\n              }\n            });\n          });\n        });\n      } else if (id === \"prob\") {\n        //概率预报\n        currFcst.contents.forEach(function (content) {\n          content.elements.forEach(function (el) {\n            if (el.id === currFcst.activeElementId) {\n              _this4.currEleOption = el;\n              _this4.currTypeOption = content;\n              _this4.currEleIdList = content.elements.map(function (el) {\n                return el.id;\n              }); // console.log(this.currEleIdList);\n              // console.log(content.date);\n              // console.log(content.hour);\n              // console.log(el.name);\n              // body处理\n\n              var strTime = '';\n\n              if (content.date) {\n                strTime = content.date.format('YYYY-MM-DD') + ' ' + content.hour + ':00:00';\n              }\n\n              var forecastTime = '';\n\n              if (strTime) {\n                forecastTime = moment(strTime, 'YYYY-MM-DD HH:mm:ss').add(+currFcst.aging, 'hours').format('YYYY-MM-DD HH:mm:ss');\n              }\n\n              var eleName = ['概率预报:NCEP', el.name + content.eleNameSuffix, content.activeHour + 'h'].join(':');\n              var body = {\n                modeName: 'qiangtianqi',\n                eleName: eleName,\n                forecastTime: forecastTime,\n                level: el.activeLevel,\n                userDefinedParas: '',\n                strTime: strTime // 有起报时间 与 无起报时间\n\n              };\n\n              if (strTime) {\n                _this4.requestImgPath(body);\n              } else {\n                _this4.requestImgPath(body, content, currFcst);\n              }\n            }\n          });\n        });\n      }\n    },\n    // 请求图片路径(只针对稳定性)\n    requestStabilityImgPath: function requestStabilityImgPath(body, citeObj) {\n      var _this5 = this;\n\n      // 取消之前的所有未完成的请求\n      this.cancelAllRequest(); // 存储取消时的token\n\n      var CancelToken = axios.CancelToken; // 请求处理\n\n      var h = citeObj.hourList;\n      var agingInterval = citeObj.hourList.length > 1 ? Math.abs(h[1] - h[0]) : 24;\n      var startTime = moment(body.strTime, 'YYYY-MM-DD HH:mm:ss');\n      var requestList = new Array(4).fill(0).map(function (el, i) {\n        var strTime = startTime.clone().subtract(agingInterval * i, 'hours').format('YYYY-MM-DD HH:mm:ss');\n\n        var currBody = _objectSpread({}, body, {\n          strTime: strTime\n        });\n\n        var params = new URLSearchParams();\n\n        for (var key in currBody) {\n          params.append(key, currBody[key]);\n        }\n\n        return axios.post(\"/proxy/10.20.67.111/PictureInfoForgetFilePath.action\", params, {\n          cancelToken: new CancelToken(function (c) {\n            _this5.cancelRequests.push(c);\n          })\n        });\n      }); // 请求数据\n\n      axios.all(requestList).then(function (datas) {\n        _this5.imgPaths = datas.map(function (data) {\n          if (!data.data.path) return '';\n          var path = data.data.path.split(',').pop();\n\n          if (path) {\n            return 'http://10.20.67.111/getPic.action2?ppath=' + path;\n          }\n\n          return '';\n        });\n      });\n    },\n    // 请求图片路径\n    requestImgPath: function requestImgPath(body, timeCiteObj, agingCiteObj) {\n      var _this6 = this;\n\n      // 取消之前的所有未完成的请求\n      this.cancelAllRequest(); // 存储取消时的token\n\n      var CancelToken = axios.CancelToken; // 参数转换\n\n      var params = new URLSearchParams();\n\n      for (var key in body) {\n        params.append(key, body[key]);\n      } // 请求数据\n\n\n      axios.post(\"/proxy/10.20.67.111/PictureInfoForgetFilePath.action\", params, {\n        cancelToken: new CancelToken(function (c) {\n          _this6.cancelRequests.push(c);\n        })\n      }).then(function (data) {\n        if (!data.data.path) {\n          _this6.imgPaths = [''];\n          return;\n        } // [模式名字 要素名字  发布时间  预报时间 层次  文件路径]\n\n\n        var _data$data$path$split = data.data.path.split(','),\n            _data$data$path$split2 = _slicedToArray(_data$data$path$split, 6),\n            patternName = _data$data$path$split2[0],\n            eleName = _data$data$path$split2[1],\n            startTime = _data$data$path$split2[2],\n            fcstTime = _data$data$path$split2[3],\n            level = _data$data$path$split2[4],\n            filePath = _data$data$path$split2[5]; // 第一次请求数据 && 有文件路径返回时\n\n\n        if (timeCiteObj && filePath) {\n          var startT = moment(startTime, 'YYYY-MM-DD HH:mm:ss');\n          var fcstT = moment(fcstTime, 'YYYY-MM-DD HH:mm:ss');\n          var startStamp = startT.unix();\n          var fcstStamp = fcstT.unix();\n\n          var aging = _this6.formatAging((fcstStamp - startStamp) / 60 / 60);\n\n          agingCiteObj.aging = aging;\n          timeCiteObj.date = startT.clone().startOf('day');\n          timeCiteObj.hour = startT.format('HH');\n          _this6.currEleOption.activeLevel = level;\n        }\n\n        _this6.imgPaths = ['http://10.20.67.111/getPic.action2?ppath=' + filePath];\n      });\n    },\n    // 格式化时效\n    formatAging: function formatAging(val) {\n      val += '';\n      var leng = val.length;\n      if (leng === 1) return '00' + val;\n      if (leng === 2) return '0' + val;\n      return val;\n    },\n    // 取消所有请求\n    cancelAllRequest: function cancelAllRequest() {\n      if (this.cancelRequests.length) {\n        this.cancelRequests.forEach(function (el) {\n          return el();\n        });\n        this.cancelRequests = [];\n      }\n    }\n  })\n};",{"version":3,"sources":["D:\\program\\frontend\\src\\views\\shorttime\\shorttime.js"],"names":["moment","axios","_","DateSelect","LevelSelect","AreaSelect","WholeAgingSelect","TimeSelect","AgingSelect","ImgShow","SideBar","ToolBtn","options","createNamespacedHelpers","mapState","mapGetters","mapMutations","name","components","data","cancelRequests","activeIndex","currDate","zoomSw","currHour","hourList","interval","area","areaList","label","value","disabled","currFcstName","currEleOption","currFcstOption","currTypeOption","currEleIdList","imgPaths","coverPaths","dieSwitch","activeClose","watch","updata_zoomUrl","onConditionChange","computed","startTime","isMoment","date","format","hour","currEleIdListLength","length","created","debouncedFindCondition","debounce","findCondition","mounted","beforeDestroy","cancelAllRequest","methods","close","updata_zoomSwitch","highChange","val","activeLevel","select","i","contents","loginzt","JSON","parse","dieFn","add","loginFn","changDate","time","subtract","changeHour","params","URLSearchParams","key","append","post","then","res","push","path","split","onKeyup","event","code","$refs","wholeAgingSelect","onTuningAging","activeElementId","isProb","find","el","fcstName","currIndex","findIndex","id","nextIndex","nextActiveElementId","onSwitchImg","sign","levelSelect","onTuningLevel","onClickElement","curr","itemId","onClickCondition","itemName","activeConditionName","currFcst","currfcst","currContent","typeName","activeTypeName","forEach","content","sections","section","items","reduce","concat","map","strTime","forecastTime","aging","eleName","join","body","modeName","level","userDefinedParas","isStability","requestStabilityImgPath","requestImgPath","mss","conditions","elementContents","elementContent","elements","eleNameSuffix","activeHour","citeObj","CancelToken","h","agingInterval","Math","abs","requestList","Array","fill","clone","currBody","cancelToken","c","all","datas","pop","timeCiteObj","agingCiteObj","patternName","fcstTime","filePath","startT","fcstT","startStamp","unix","fcstStamp","formatAging","startOf","leng"],"mappings":"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","sourcesContent":["import * as moment from \"moment\";\r\nimport * as axios from \"axios\";\r\nimport _ from 'lodash';\r\nimport {\r\n  DateSelect,\r\n  LevelSelect,\r\n  AreaSelect,\r\n  WholeAgingSelect,\r\n  TimeSelect,\r\n  AgingSelect,\r\n  ImgShow,\r\n  SideBar\r\n} from \"../../components/share\";\r\nimport { ToolBtn } from '../../components/base';\r\nimport options from \"../../assets/config/shorttime_config\";\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nconst { mapState, mapGetters, mapMutations } = createNamespacedHelpers(\r\n  \"synthesis\"\r\n);\r\n\r\nexport default {\r\n  name: \"Shorttime\",\r\n  components: { DateSelect, LevelSelect, AreaSelect, WholeAgingSelect, TimeSelect, AgingSelect, ImgShow,SideBar,ToolBtn },\r\n  data: function() {\r\n    return {\r\n\r\n      // 该引用存储短期所有配置\r\n      options,\r\n\r\n      cancelRequests: [],\r\n      activeIndex:null,\r\n      currDate: null,\r\n      zoomSw:false,\r\n      currHour: '02',\r\n      hourList: ['02', '05', '08', '11', '14', '17', '20', '23'],\r\n      interval: '24h',\r\n\r\n      area: \"全国\",\r\n      areaList: [\r\n        {\r\n          label: \"全国\",\r\n          value: \"全国\",\r\n          disabled: false\r\n        },\r\n        {\r\n          label: \"华北\",\r\n          value: \"华北\",\r\n          disabled: false\r\n        },\r\n        {\r\n          label: \"东北\",\r\n          value: \"东北\",\r\n          disabled: false\r\n        },\r\n        {\r\n          label: \"华东\",\r\n          value: \"华东\",\r\n          disabled: false\r\n        },\r\n        {\r\n          label: \"华南\",\r\n          value: \"华南\",\r\n          disabled: false\r\n        },\r\n        {\r\n          label: \"西南\",\r\n          value: \"西南\",\r\n          disabled: false\r\n        },\r\n        {\r\n          label: \"西北\",\r\n          value: \"西北\",\r\n          disabled: false\r\n        },\r\n        {\r\n          label: \"青藏\",\r\n          value: \"青藏\",\r\n          disabled: false\r\n        },\r\n        {\r\n          label: \"新疆\",\r\n          value: \"新疆\",\r\n          disabled: false\r\n        },\r\n        {\r\n          label: \"近海\",\r\n          value: \"近海\",\r\n          disabled: false\r\n        }\r\n      ],\r\n\r\n      // 当前选中的预报类型\r\n      currFcstName: \"多模式预报\",\r\n\r\n      // 该引用当前选中的要素配置\r\n      currEleOption: null,\r\n\r\n      // 该引用当前预报配置\r\n      currFcstOption: null,\r\n\r\n      // 该引用含有当前起报时间以及当前选中要素的id\r\n      currTypeOption: null,\r\n\r\n      // 当前选中路径下的所有要素id的列表\r\n      currEleIdList: [],\r\n\r\n      // 图片地址\r\n      imgPaths: [],\r\n      coverPaths:[],\r\n      dieSwitch:false,\r\n      activeClose:false,\r\n    };\r\n  },\r\n  watch:{\r\n    imgPaths(){\r\n      this.updata_zoomUrl(this.imgPaths[0])\r\n    },\r\n    area(){\r\n      this.onConditionChange()\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState([\"zoomSwitch\",\"zoomUrl\"]),\r\n    // 当前起报时间\r\n    startTime() {\r\n      if (this.currTypeOption && moment.isMoment(this.currTypeOption.date)) {\r\n        return this.currTypeOption.date.format('YYYY-MM-DD') + ' ' + this.currTypeOption.hour;\r\n      }\r\n      return '';\r\n    },\r\n    currEleIdListLength() {\r\n      return this.currEleIdList.length;\r\n    }\r\n  },\r\n  created() {\r\n    this.debouncedFindCondition = _.debounce(this.findCondition, 300);\r\n  },\r\n  mounted() {\r\n    this.findCondition();\r\n  },\r\n\r\n  beforeDestroy() {\r\n    this.cancelAllRequest();\r\n  },\r\n\r\n  methods: {\r\n    moment,\r\n    ...mapMutations([\"updata_zoomSwitch\",\"updata_zoomUrl\"]),\r\n    close(){\r\n      this.updata_zoomSwitch(false)\r\n    },\r\n    highChange(val){\r\n      this.currEleOption.activeLevel=val\r\n      this.onConditionChange()\r\n    },\r\n    select(i) {\r\n      this.activeClose=!this.activeClose\r\n      if (this.activeIndex == i) {\r\n        if(!this.activeClose){\r\n          this.activeIndex = null\r\n          this.dieSwitch=false\r\n          // alert(options[0].contents[0].hour)\r\n          this.currHour=options[0].contents[0].hour\r\n          this.loginzt=false\r\n          this.coverPaths=[]\r\n          this.activeClose=false\r\n        }\r\n        \r\n      } else {\r\n        // let value=JSON.parse(JSON.stringify(options[0].contents[0].date))\r\n        this.currHour=options[0].contents[0].hour\r\n        this.currDate = moment(JSON.parse(JSON.stringify(options[0].contents[0].date)))\r\n        if (i == 1) {\r\n          this.loginzt=true\r\n          this.dieFn(this.interval, moment(this.currDate).add(this.currHour,'hour').format('YYYY-MM-DD HH:mm:ss'))\r\n        } else {\r\n          this.loginFn(this.interval,moment(this.currDate).add(this.currHour,'hour').format('YYYY-MM-DD HH:mm:ss'))\r\n          // this.login_switch=true\r\n          this.loginzt=false\r\n        }\r\n        this.activeIndex = i\r\n      }\r\n    },\r\n    changDate(i) {\r\n      const time = moment(this.currDate.format('YYYYMMDD 00:00:00'), 'YYYYMMDD HH:mm:ss').add(this.currHour, 'hours');\r\n      if (i === 1) {\r\n        time.add(parseInt(this.activeIndex==1?this.interval:1), 'hours');\r\n      } else {\r\n        time.subtract(parseInt(this.activeIndex==1?this.interval:1), 'hours');\r\n      }\r\n      this.currDate = time;\r\n      this.currHour = time.format('HH');\r\n      if (this.activeIndex == 2) {\r\n        this.loginFn(this.interval, moment(this.currDate).format('YYYY-MM-DD HH:mm:ss'))\r\n      } else if (this.activeIndex == 1) {\r\n        this.dieFn(this.interval, moment(this.currDate).format('YYYY-MM-DD HH:mm:ss'))\r\n      }\r\n      // this.$emit('dieFn',this.interval,moment(this.currDate).format('YYYY-MM-DD HH:mm:ss'))\r\n    },\r\n    changeHour() {\r\n      if(this.activeIndex==1){\r\n        this.dieFn(this.interval, moment(this.currDate).format('YYYY-MM-DD HH:mm:ss'))\r\n      }else{\r\n        this.loginFn(this.interval, moment(this.currDate).add(this.currHour,'hour').format('YYYY-MM-DD HH:mm:ss'))\r\n      }\r\n      \r\n    },\r\n    dieFn(interval, date) {\r\n      // console.log(interval)\r\n      this.coverPaths=[]\r\n      // document.querySelector('.imgDie').innerHTML = ''\r\n      // console.log(interval, date)\r\n      if (interval && date) {\r\n        this.dieSwitch = true\r\n        let data = {\r\n          'modeName': 'qiangtianqi',\r\n          'eleName': `OBSoverlay:实况叠加:${interval}`,\r\n          'forecastTime': date,\r\n          'level': '',\r\n          'userDefinedParas': '',\r\n          'strTime': date,\r\n          'symbol': 1\r\n        }\r\n        const params = new URLSearchParams();\r\n        for (const key in data) {\r\n          params.append(key, data[key]);\r\n        }\r\n        axios.post(`/proxy/10.20.67.111/PictureInfoForgetFilePath.action`, params).then(res => {\r\n          // console.log(res.data.path.split(','))\r\n          this.coverPaths.push(`http://10.20.67.111/getPic.action2?ppath=${res.data.path.split(',')[5]}`)\r\n        })\r\n      } else {\r\n        this.dieSwitch = false\r\n      }\r\n\r\n    },\r\n    loginFn(interval, date) {\r\n      // if (this.loginzt) {\r\n      this.coverPaths=[]\r\n      // document.querySelector('.imgDie').innerHTML = ''\r\n        // console.log(interval, date)\r\n        if (interval && date) {\r\n          this.dieSwitch = true\r\n          let data = {\r\n            'modeName': 'qiangtianqi',\r\n            'eleName': `forecastoverlay:预报`,\r\n            'forecastTime': moment(date,'YYYY-MM-DD HH:mm:ss').add(parseInt(this.interval),'hour').format('YYYY-MM-DD HH:mm:ss'),\r\n            'level': '',\r\n            'userDefinedParas': '',\r\n            'strTime': date,\r\n            'symbol': 2\r\n          }\r\n          const params = new URLSearchParams();\r\n          for (const key in data) {\r\n            params.append(key, data[key]);\r\n          }\r\n          axios.post(`/proxy/10.20.67.111/PictureInfoForgetFilePath.action`, params).then(res => {\r\n            // console.log(res.data.path.split(','))\r\n            this.coverPaths.push(`http://10.20.67.111/getPic.action2?ppath=${res.data.path.split(',')[5]}`)\r\n          })\r\n        }\r\n\r\n    },\r\n    // 键盘事件监听\r\n    onKeyup(event) {\r\n      const { code } = event;\r\n      if (code === 'ArrowLeft') {\r\n        this.$refs.wholeAgingSelect[0].onTuningAging(-1);\r\n      }else if (code === 'ArrowRight') {\r\n        this.$refs.wholeAgingSelect[0].onTuningAging(1);\r\n      }else if (code === 'ArrowUp' || code === 'ArrowDown') {\r\n\r\n        let activeElementId = '';\r\n        const isProb = this.currFcstName === '概率预报';\r\n        if (isProb) {\r\n          activeElementId = this.options.find(el => el .fcstName === this.currFcstName).activeElementId;\r\n        }else {\r\n          activeElementId = this.currTypeOption.activeElementId;\r\n        }\r\n        const currIndex = this.currEleIdList.findIndex(id => id === activeElementId);\r\n        if (currIndex === -1) return;\r\n        let nextIndex = currIndex + (code === 'ArrowUp' ? -1 : 1);\r\n        if (nextIndex <= 0) {\r\n          nextIndex = this.currEleIdListLength - 1;\r\n        }else if (nextIndex >= this.currEleIdListLength) {\r\n          nextIndex = 0;\r\n        }\r\n\r\n        const nextActiveElementId = this.currEleIdList[nextIndex];\r\n        if (isProb) {\r\n          this.options.find(el => el .fcstName === this.currFcstName).activeElementId = nextActiveElementId;\r\n        }else {\r\n          this.currTypeOption.activeElementId = nextActiveElementId;\r\n        }\r\n\r\n        this.debouncedFindCondition();\r\n      }\r\n    },\r\n\r\n    // 图片切换事件\r\n    onSwitchImg(sign) {\r\n      if (sign === 'left') {\r\n        this.$refs.wholeAgingSelect[0].onTuningAging(-1);\r\n      }else if (sign === 'right') {\r\n        this.$refs.wholeAgingSelect[0].onTuningAging(1);\r\n      }else if (sign === 'top') {\r\n        this.$refs.levelSelect.onTuningLevel(1);\r\n      }else if (sign === 'bottom') {\r\n        this.$refs.levelSelect.onTuningLevel(-1);\r\n      }\r\n    },\r\n\r\n    // 条件改变时\r\n    onConditionChange() {\r\n      this.debouncedFindCondition();\r\n    },\r\n\r\n    //点击要素时\r\n    onClickElement(curr, itemId) {\r\n      if (curr.activeElementId === itemId) return;\r\n      curr.activeElementId = itemId;\r\n      this.debouncedFindCondition();\r\n    },\r\n\r\n    // 点击条件时\r\n    onClickCondition(curr, itemName) {\r\n      if (curr.activeConditionName === itemName) return;\r\n      curr.activeConditionName = itemName;\r\n      this.debouncedFindCondition();\r\n    },\r\n\r\n    // 寻找选中的条件\r\n    findCondition() {\r\n      const currFcst = this.options.find(\r\n        el => el.fcstName === this.currFcstName\r\n      );\r\n      this.currfcst = currFcst;\r\n      // console.log(currFcst);\r\n      const id = currFcst.id;\r\n\r\n      this.currFcstOption = currFcst;\r\n\r\n      // 多模式预报\r\n      if (id === \"manyPattern\") {\r\n        const currContent = currFcst.contents.find(\r\n          el => el.typeName === currFcst.activeTypeName\r\n        );\r\n        currContent.contents.forEach(content => {\r\n          content.sections.forEach(section => {\r\n            section.items.forEach(el => {\r\n              if (el.id === currContent.activeElementId) {\r\n                this.currEleOption = el;\r\n                this.currTypeOption = currContent;\r\n                this.currEleIdList = content.sections.reduce((curr, el) => {\r\n                  return curr.concat(el.items.map(el => el.id));\r\n                }, []);\r\n                // console.log(this.currEleIdList);\r\n                // console.log(currContent.typeName);\r\n                // console.log(currContent.date);\r\n                // console.log(currContent.hour);\r\n                // console.log(el.name);\r\n                // console.log(el);\r\n\r\n                // body处理\r\n                let strTime = '';\r\n                if (currContent.date) {\r\n                  strTime = currContent.date.format('YYYY-MM-DD') + ' ' + currContent.hour + ':00:00';\r\n                }\r\n                let forecastTime = '';\r\n                if (strTime) {\r\n                  forecastTime = moment(strTime, 'YYYY-MM-DD HH:mm:ss').add(+currFcst.aging, 'hours').format('YYYY-MM-DD HH:mm:ss');\r\n                }\r\n                const eleName = ['forecast', this.area, currContent.name, el.name].join(':');\r\n                const body = {\r\n                  modeName: 'qiangtianqi',\r\n                  eleName,\r\n                  forecastTime,\r\n                  level: el.activeLevel,\r\n                  userDefinedParas: '',\r\n                  strTime\r\n                }\r\n                // 有起报时间 与 无起报时间(即第一次请求)\r\n                if (strTime) {\r\n                  if (currContent.isStability === true) {  //当稳定性为true\r\n                    this.requestStabilityImgPath(body, currContent);\r\n                  }else {\r\n                    this.requestImgPath(body);\r\n                  }\r\n                }else {\r\n                  this.requestImgPath(body, currContent, currFcst);\r\n                }\r\n\r\n              }\r\n            });\r\n          });\r\n        });\r\n      } else if (id === \"gather\") {  //集合预报\r\n        const currContent = currFcst.contents.find(\r\n          el => el.typeName === currFcst.activeTypeName\r\n        );\r\n\r\n        const mss = [];\r\n        currContent.conditions.forEach(el => {\r\n          mss.push(el.activeConditionName);\r\n        });\r\n\r\n        currContent.elementContents.forEach(elementContent => {\r\n          elementContent.sections.forEach(section => {\r\n            section.elements.forEach(el => {\r\n              if (el.id === currContent.activeElementId) {\r\n                this.currEleOption = el;\r\n                this.currTypeOption = currContent;\r\n                this.currEleIdList = elementContent.sections.reduce((curr, el) => {\r\n                  return curr.concat(el.elements.map(el => el.id));\r\n                }, []);\r\n                // console.log(this.currEleIdList);\r\n                // console.log(currContent.typeName);\r\n                // console.log(currContent.date);\r\n                // console.log(currContent.hour);\r\n                // console.log(el.name);\r\n\r\n                // body处理\r\n                let strTime = '';\r\n                if (currContent.date) {\r\n                  strTime = currContent.date.format('YYYY-MM-DD') + ' ' + currContent.hour + ':00:00';\r\n                }\r\n                let forecastTime = '';\r\n                if (strTime) {\r\n                  forecastTime = moment(strTime, 'YYYY-MM-DD HH:mm:ss').add(+currFcst.aging, 'hours').format('YYYY-MM-DD HH:mm:ss');\r\n                }\r\n\r\n                const eleName = ['集合预报', currContent.name, el.name, mss.join(',')].join(':');\r\n                const body = {\r\n                  modeName: 'qiangtianqi',\r\n                  eleName,\r\n                  forecastTime,\r\n                  level: el.activeLevel,\r\n                  userDefinedParas: '',\r\n                  strTime\r\n                }\r\n\r\n                // 有起报时间 与 无起报时间\r\n                if (strTime) {\r\n                  this.requestImgPath(body);\r\n                }else {\r\n                  this.requestImgPath(body, currContent, currFcst);\r\n                }\r\n                \r\n              }\r\n            });\r\n          });\r\n        });\r\n\r\n      } else if (id === \"prob\") {  //概率预报\r\n\r\n        currFcst.contents.forEach(content => {\r\n          content.elements.forEach(el => {\r\n            if (el.id === currFcst.activeElementId) {\r\n              this.currEleOption = el;\r\n              this.currTypeOption = content;\r\n              this.currEleIdList = content.elements.map(el => el.id);\r\n              // console.log(this.currEleIdList);\r\n              // console.log(content.date);\r\n              // console.log(content.hour);\r\n              // console.log(el.name);\r\n\r\n              // body处理\r\n              let strTime = '';\r\n              if (content.date) {\r\n                strTime = content.date.format('YYYY-MM-DD') + ' ' + content.hour + ':00:00';\r\n              }\r\n              let forecastTime = '';\r\n              if (strTime) {\r\n                forecastTime = moment(strTime, 'YYYY-MM-DD HH:mm:ss').add(+currFcst.aging, 'hours').format('YYYY-MM-DD HH:mm:ss');\r\n              }\r\n              const eleName = ['概率预报:NCEP', el.name + content.eleNameSuffix, content.activeHour + 'h'].join(':');\r\n              const body = {\r\n                modeName: 'qiangtianqi',\r\n                eleName,\r\n                forecastTime,\r\n                level: el.activeLevel,\r\n                userDefinedParas: '',\r\n                strTime\r\n              }\r\n\r\n              // 有起报时间 与 无起报时间\r\n              if (strTime) {\r\n                this.requestImgPath(body);\r\n              }else {\r\n                this.requestImgPath(body, content, currFcst);\r\n              }\r\n            }\r\n          });\r\n        });\r\n\r\n      }\r\n\r\n    },\r\n\r\n    // 请求图片路径(只针对稳定性)\r\n    requestStabilityImgPath(body, citeObj) {\r\n      \r\n      // 取消之前的所有未完成的请求\r\n      this.cancelAllRequest();\r\n\r\n      // 存储取消时的token\r\n      const CancelToken = axios.CancelToken;\r\n\r\n      // 请求处理\r\n      const h = citeObj.hourList;\r\n      const agingInterval = citeObj.hourList.length > 1 ? Math.abs(h[1] - h[0]) : 24;\r\n      const startTime = moment(body.strTime, 'YYYY-MM-DD HH:mm:ss');\r\n      const requestList = new Array(4).fill(0).map((el, i) => {\r\n        const strTime = startTime.clone().subtract(agingInterval * i, 'hours').format('YYYY-MM-DD HH:mm:ss');\r\n        const currBody = {...body, strTime};\r\n        const params = new URLSearchParams();\r\n        for (const key in currBody) {\r\n          params.append(key, currBody[key]);\r\n        }\r\n        return axios.post(\"/proxy/10.20.67.111/PictureInfoForgetFilePath.action\", params, {\r\n          cancelToken: new CancelToken(c => {\r\n            this.cancelRequests.push(c);\r\n          })\r\n        });\r\n      });\r\n\r\n      // 请求数据\r\n      axios.all(requestList).then(datas => {\r\n        this.imgPaths = datas.map(data => {\r\n          if (!data.data.path) return '';\r\n          const path = data.data.path.split(',').pop();\r\n          if (path) {\r\n            return 'http://10.20.67.111/getPic.action2?ppath=' + path;\r\n          }\r\n          return '';\r\n        });\r\n      })\r\n\r\n    },\r\n\r\n\r\n    // 请求图片路径\r\n    requestImgPath(body, timeCiteObj, agingCiteObj) {\r\n\r\n      // 取消之前的所有未完成的请求\r\n      this.cancelAllRequest();\r\n\r\n      // 存储取消时的token\r\n      const CancelToken = axios.CancelToken;\r\n\r\n      // 参数转换\r\n      const params = new URLSearchParams();\r\n      for (const key in body) {\r\n        params.append(key, body[key]);\r\n      }\r\n\r\n      // 请求数据\r\n      axios.post(\"/proxy/10.20.67.111/PictureInfoForgetFilePath.action\", params, {\r\n        cancelToken: new CancelToken(c => {\r\n          this.cancelRequests.push(c);\r\n        })\r\n      }).then(data => {\r\n\r\n        if (!data.data.path) {\r\n          this.imgPaths = [''];\r\n          return;\r\n        }\r\n\r\n        // [模式名字 要素名字  发布时间  预报时间 层次  文件路径]\r\n        const [patternName, eleName, startTime, fcstTime, level, filePath] = data.data.path.split(',');\r\n\r\n        // 第一次请求数据 && 有文件路径返回时\r\n        if (timeCiteObj && filePath) {\r\n          const startT = moment(startTime, 'YYYY-MM-DD HH:mm:ss');\r\n          const fcstT = moment(fcstTime, 'YYYY-MM-DD HH:mm:ss');\r\n          const startStamp = startT.unix();\r\n          const fcstStamp = fcstT.unix();\r\n          const aging = this.formatAging((fcstStamp - startStamp) / 60 / 60);\r\n          agingCiteObj.aging = aging;\r\n          timeCiteObj.date = startT.clone().startOf('day');\r\n          timeCiteObj.hour = startT.format('HH');\r\n          this.currEleOption.activeLevel = level;\r\n        }\r\n        this.imgPaths = ['http://10.20.67.111/getPic.action2?ppath=' + filePath];\r\n      })\r\n    },\r\n\r\n    // 格式化时效\r\n    formatAging(val) {\r\n      val += '';\r\n      const leng = val.length;\r\n      if (leng === 1) return '00' + val;\r\n      if (leng === 2) return '0' + val;\r\n      return val;\r\n    },\r\n\r\n    // 取消所有请求\r\n    cancelAllRequest() {\r\n      if (this.cancelRequests.length) {\r\n        this.cancelRequests.forEach(el => el());\r\n        this.cancelRequests = [];\r\n      }\r\n    },\r\n  }\r\n\r\n\r\n};\r\n"]}]}