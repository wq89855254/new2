{"remainingRequest":"D:\\program\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\program\\frontend\\src\\components\\share\\whole-aging-select\\WholeAgingSelect.js?vue&type=script&lang=js&","dependencies":[{"path":"D:\\program\\frontend\\src\\components\\share\\whole-aging-select\\WholeAgingSelect.js","mtime":1553855602973},{"path":"D:\\program\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\program\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\nimport { ConditionLayout, ToolBtn } from '../../base';\nimport moment from 'moment';\nexport default {\n  name: \"whole-aging-select\",\n  components: {\n    ConditionLayout: ConditionLayout,\n    ToolBtn: ToolBtn\n  },\n  props: {\n    startTime: {\n      type: String,\n      required: true\n    },\n    aging1: {\n      type: String,\n      required: true\n    },\n    agingList: {\n      type: Array,\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      currAging: this.aging1,\n      currAgingList: this.agingList.slice(),\n      pageNum: 16,\n      pageIndex: 0,\n      agingIndex: 0,\n      currFilterVal: 3\n    };\n  },\n  computed: {\n    currStartTime: function currStartTime() {\n      return moment(this.startTime, 'YYYY-MM-DD HH');\n    },\n    length: function length() {\n      return this.currAgingList.length;\n    },\n    pageSize: function pageSize() {\n      return Math.ceil(this.length / this.pageNum);\n    },\n    isPageStart: function isPageStart() {\n      return this.pageIndex === 0;\n    },\n    isPageEnd: function isPageEnd() {\n      return this.pageIndex === this.pageSize - 1;\n    },\n    isAgingStart: function isAgingStart() {\n      return this.agingIndex === 0;\n    },\n    isAgingEnd: function isAgingEnd() {\n      return this.agingIndex === this.length - 1;\n    },\n    currPageList: function currPageList() {\n      var _this = this;\n\n      var currDay;\n      return this.currAgingList.slice(this.pageIndex * this.pageNum, this.pageIndex * this.pageNum + this.pageNum).map(function (aging) {\n        if (_this.currStartTime.isValid()) {\n          var fcstTime = _this.currStartTime.clone().add(+aging, 'hours'); // const isDayStart = fcstTime.hours() === 0;\n\n\n          var day = fcstTime.date();\n          var isDifferent = day !== currDay;\n\n          if (isDifferent) {\n            currDay = day;\n          }\n\n          return {\n            aging: aging,\n            isDifferent: isDifferent,\n            time: isDifferent ? fcstTime.format('DD日HH时') : fcstTime.format('HH')\n          };\n        }\n\n        return {\n          aging: aging,\n          isDifferent: false,\n          time: ''\n        };\n      });\n    }\n  },\n  watch: {\n    agingIndex: function agingIndex() {\n      this.resetPageIndex();\n    },\n    aging1: function aging1(aging) {\n      this.currAging = aging; // this.resetAgingIndex();\n    },\n    agingList: function agingList(_agingList) {\n      this.currAgingList = _agingList.slice(); // this.resetAgingIndex();\n    }\n  },\n  updated: function updated() {\n    this.resetAgingIndex();\n  },\n  mounted: function mounted() {\n    this.resetPageIndex();\n    this.resetAgingIndex();\n  },\n  methods: {\n    // 过滤\n    onFilterChange: function onFilterChange() {\n      var _this2 = this;\n\n      this.currAgingList = this.agingList.filter(function (el) {\n        return +el % _this2.currFilterVal === 0;\n      });\n      var agingIndex = this.currAgingList.findIndex(function (el) {\n        return el === _this2.currAging;\n      });\n\n      if (agingIndex === -1) {\n        agingIndex = 0;\n        this.$emit('update:aging1', this.currAgingList[0]);\n        this.$emit('aging-change');\n      }\n\n      this.agingIndex = agingIndex;\n      this.currAging = this.currAgingList[agingIndex];\n      this.resetPageIndex();\n    },\n    // 点击选中时效\n    onClick: function onClick(item) {\n      if (this.currAging === item.aging) return;\n      this.currAging = item.aging;\n      this.$emit('update:aging1', this.currAging);\n      this.$emit('aging-change');\n    },\n    // 翻页\n    onSwitchPage: function onSwitchPage(dir) {\n      // debugger\n      if (dir === 'left') {\n        this.pageIndex--;\n      } else {\n        this.pageIndex++;\n      }\n\n      if (this.pageIndex < 0) {\n        this.pageIndex = 0;\n      } else if (this.pageIndex >= this.pageSize) {\n        this.pageIndex = this.pageSize - 1;\n      }\n    },\n    // 微调时效\n    onTuningAging: function onTuningAging(sign) {\n      if (sign === 1) {\n        this.agingIndex++;\n      } else {\n        this.agingIndex--;\n      }\n\n      if (this.agingIndex < 0) {\n        this.agingIndex = 0;\n      } else if (this.agingIndex >= this.length) {\n        this.agingIndex = this.length - 1;\n      }\n\n      this.currAging = this.currAgingList[this.agingIndex];\n      this.$emit('update:aging1', this.currAging);\n      this.$emit('aging-change');\n    },\n    // 重置当前页码\n    resetPageIndex: function resetPageIndex() {\n      this.pageIndex = Math.floor(this.agingIndex / this.pageNum);\n    },\n    // 重置当前时效下标\n    resetAgingIndex: function resetAgingIndex() {\n      var _this3 = this;\n\n      this.agingIndex = this.currAgingList.findIndex(function (aging) {\n        return aging === _this3.currAging;\n      });\n    },\n    // 重置\n    onClickReset: function onClickReset() {\n      var _this4 = this;\n\n      this.currAgingList = this.agingList.slice();\n      this.agingIndex = this.currAgingList.findIndex(function (el) {\n        return el === _this4.currAging;\n      });\n      this.resetPageIndex();\n    }\n  }\n};",{"version":3,"sources":["D:\\program\\frontend\\src\\components\\share\\whole-aging-select\\WholeAgingSelect.js"],"names":["ConditionLayout","ToolBtn","moment","name","components","props","startTime","type","String","required","aging1","agingList","Array","data","currAging","currAgingList","slice","pageNum","pageIndex","agingIndex","currFilterVal","computed","currStartTime","length","pageSize","Math","ceil","isPageStart","isPageEnd","isAgingStart","isAgingEnd","currPageList","currDay","map","aging","isValid","fcstTime","clone","add","day","date","isDifferent","time","format","watch","resetPageIndex","updated","resetAgingIndex","mounted","methods","onFilterChange","filter","el","findIndex","$emit","onClick","item","onSwitchPage","dir","onTuningAging","sign","floor","onClickReset"],"mappings":"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","sourcesContent":["import { ConditionLayout, ToolBtn } from '../../base';\r\nimport moment from 'moment';\r\nexport default {\r\n  name: \"whole-aging-select\",\r\n  components: { ConditionLayout, ToolBtn },\r\n  props: {\r\n    startTime: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    aging1: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    agingList: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      currAging: this.aging1,\r\n      currAgingList: this.agingList.slice(),\r\n      pageNum: 16,\r\n      pageIndex: 0,\r\n      agingIndex: 0,\r\n      currFilterVal: 3\r\n    };\r\n  },\r\n  computed: {\r\n    currStartTime() {\r\n      return moment(this.startTime, 'YYYY-MM-DD HH');\r\n    },\r\n    length() {\r\n      return this.currAgingList.length;\r\n    },\r\n    pageSize() {\r\n      return Math.ceil(this.length / this.pageNum);\r\n    },\r\n    isPageStart() {\r\n      return this.pageIndex === 0;\r\n    },\r\n    isPageEnd() {\r\n      return this.pageIndex === (this.pageSize - 1);\r\n    },\r\n    isAgingStart() {\r\n      return this.agingIndex === 0;\r\n    },\r\n    isAgingEnd() {\r\n      return this.agingIndex === (this.length - 1);\r\n    },\r\n    currPageList() {\r\n      let currDay;\r\n      return this.currAgingList.slice(this.pageIndex * this.pageNum, this.pageIndex * this.pageNum + this.pageNum).map(aging => {\r\n        if (this.currStartTime.isValid()) {\r\n          const fcstTime = this.currStartTime.clone().add(+aging, 'hours');\r\n          // const isDayStart = fcstTime.hours() === 0;\r\n          const day = fcstTime.date();\r\n          const isDifferent = day !== currDay;\r\n          if (isDifferent) {\r\n            currDay = day;\r\n          }\r\n          return {\r\n            aging,\r\n            isDifferent,\r\n            time: isDifferent ? fcstTime.format('DD日HH时') : fcstTime.format('HH')\r\n          }\r\n        }\r\n        return {\r\n          aging,\r\n          isDifferent: false,\r\n          time: ''\r\n        }\r\n\r\n      });\r\n    }\r\n  },\r\n  watch: {\r\n    agingIndex() {\r\n      this.resetPageIndex();\r\n    },\r\n    aging1(aging) {\r\n      this.currAging = aging;\r\n      \r\n      // this.resetAgingIndex();\r\n      \r\n    },\r\n    agingList(agingList) {\r\n      this.currAgingList = agingList.slice();\r\n      // this.resetAgingIndex();\r\n    }\r\n  },\r\n  updated() {\r\n    this.resetAgingIndex();\r\n  },\r\n  mounted() {\r\n    this.resetPageIndex();\r\n    this.resetAgingIndex();\r\n  },\r\n  methods: {\r\n\r\n    // 过滤\r\n    onFilterChange() {\r\n      this.currAgingList = this.agingList.filter(el => +el % this.currFilterVal === 0);\r\n      let agingIndex = this.currAgingList.findIndex(el => el === this.currAging);\r\n      if (agingIndex === -1) {\r\n        agingIndex = 0;\r\n        this.$emit('update:aging1', this.currAgingList[0]);\r\n        this.$emit('aging-change');\r\n      }\r\n      this.agingIndex = agingIndex;\r\n      this.currAging = this.currAgingList[agingIndex];\r\n      this.resetPageIndex();\r\n    },\r\n\r\n\r\n    // 点击选中时效\r\n    onClick(item) {\r\n      if (this.currAging === item.aging) return;\r\n      this.currAging = item.aging;\r\n      this.$emit('update:aging1', this.currAging);\r\n      this.$emit('aging-change');\r\n    },\r\n\r\n    // 翻页\r\n    onSwitchPage(dir) {\r\n      // debugger\r\n      if (dir === 'left') {\r\n        this.pageIndex--;\r\n      }else {\r\n        this.pageIndex++;\r\n      }\r\n      if (this.pageIndex < 0) {\r\n        this.pageIndex = 0;\r\n      }else if (this.pageIndex >= this.pageSize) {\r\n        this.pageIndex = this.pageSize - 1;\r\n      }\r\n    },\r\n\r\n    // 微调时效\r\n    onTuningAging(sign) {\r\n      if (sign === 1) {\r\n        this.agingIndex++;\r\n      }else {\r\n        this.agingIndex--;\r\n      }\r\n      if (this.agingIndex < 0) {\r\n        this.agingIndex = 0;\r\n      }else if (this.agingIndex >= this.length) {\r\n        this.agingIndex = this.length - 1;\r\n      }\r\n      this.currAging = this.currAgingList[this.agingIndex];\r\n      this.$emit('update:aging1', this.currAging);\r\n      this.$emit('aging-change');\r\n    },\r\n\r\n    // 重置当前页码\r\n    resetPageIndex() {\r\n      this.pageIndex = Math.floor(this.agingIndex / this.pageNum);\r\n    },\r\n\r\n    // 重置当前时效下标\r\n    resetAgingIndex() {\r\n      this.agingIndex = this.currAgingList.findIndex(aging => aging === this.currAging);\r\n    },\r\n    \r\n    // 重置\r\n    onClickReset() {\r\n      this.currAgingList = this.agingList.slice();\r\n      this.agingIndex = this.currAgingList.findIndex(el => el === this.currAging);\r\n      this.resetPageIndex();\r\n    }\r\n  }\r\n};\r\n"]}]}