{"remainingRequest":"D:\\program\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\program\\frontend\\src\\views\\shortimpending\\shortimpending.js?vue&type=script&lang=js&","dependencies":[{"path":"D:\\program\\frontend\\src\\views\\shortimpending\\shortimpending.js","mtime":1553855602466},{"path":"D:\\program\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\program\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport _slicedToArray from \"D:\\\\program\\\\frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/slicedToArray\";\nimport \"core-js/modules/es6.array.fill\";\nimport _Array$isArray from \"D:\\\\program\\\\frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/array/is-array\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.find\";\nimport _objectSpread from \"D:\\\\program\\\\frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport * as moment from \"moment\";\nimport * as axios from \"axios\";\nimport ShortTime from \"./short-time/ShortTime.vue\";\nimport datas from \"./short-time/datas.js\";\nimport Near from \"./near/Near.vue\";\nimport Sounding from \"./sounding/Sounding.vue\";\nimport Fcst from \"./fcst/Fcst.vue\";\nimport { ToolBtn } from \"../../components/base\";\nimport _ from \"lodash\";\nimport { createNamespacedHelpers } from \"vuex\";\n\nvar _createNamespacedHelp = createNamespacedHelpers(\"synthesis\"),\n    mapState = _createNamespacedHelp.mapState,\n    mapGetters = _createNamespacedHelp.mapGetters,\n    mapMutations = _createNamespacedHelp.mapMutations;\n\nimport { WholeAgingSelect, LevelSelect, AreaSelect, ImgShow, RelevanceAgingSelect } from \"../../components/share\";\nexport default {\n  name: \"shortimpending\",\n  components: {\n    ShortTime: ShortTime,\n    Near: Near,\n    Sounding: Sounding,\n    Fcst: Fcst,\n    WholeAgingSelect: WholeAgingSelect,\n    LevelSelect: LevelSelect,\n    AreaSelect: AreaSelect,\n    ImgShow: ImgShow,\n    RelevanceAgingSelect: RelevanceAgingSelect,\n    ToolBtn: ToolBtn\n  },\n  data: function data() {\n    return {\n      // activeIndex:null,\n      areaList: [{\n        label: \"全国\",\n        value: \"全国\",\n        disabled: false\n      }, {\n        label: \"华北\",\n        value: \"华北\",\n        disabled: false\n      }, {\n        label: \"东北\",\n        value: \"东北\",\n        disabled: false\n      }, {\n        label: \"华东\",\n        value: \"华东\",\n        disabled: false\n      }, {\n        label: \"华南\",\n        value: \"华南\",\n        disabled: false\n      }, {\n        label: \"西南\",\n        value: \"西南\",\n        disabled: false\n      }, {\n        label: \"西北\",\n        value: \"西北\",\n        disabled: false\n      }, {\n        label: \"青藏\",\n        value: \"青藏\",\n        disabled: false\n      }, {\n        label: \"新疆\",\n        value: \"新疆\",\n        disabled: false\n      }, {\n        label: \"近海\",\n        value: \"近海\",\n        disabled: false\n      }],\n      tabs: [{\n        id: \"shortTime\",\n        typeName: \"短时\",\n        // 该处时效是没有用的，在这只是为了占位，避免ImgShow组件报错\n        aging: \"001\",\n        agingList: [\"001\", \"002\", \"003\"]\n      }, {\n        id: \"near\",\n        typeName: \"临近\",\n        aging: \"060\",\n        agingList: [\"060\", \"090\", \"120\"]\n      }, {\n        id: \"sounding\",\n        typeName: \"探空\",\n        agings: [{\n          // 该处时效是没有用的，在这只是为了占位，避免ImgShow组件报错\n          type: \"act\",\n          aging: \"000\",\n          agingList: [\"000\", \"003\", \"006\", \"009\", \"012\", \"015\", \"018\", \"021\", \"024\", \"027\", \"030\", \"033\", \"036\", \"039\", \"042\", \"045\", \"048\"]\n        }, {\n          type: \"fcst\",\n          aging: \"000\",\n          agingList: [\"000\", \"003\", \"006\", \"009\", \"012\", \"015\", \"018\", \"021\", \"024\", \"027\", \"030\", \"033\", \"036\", \"039\", \"042\", \"045\", \"048\"]\n        }, {\n          type: \"fy4\",\n          aging: \"006\",\n          agingList: [\"006\", \"007\", \"008\", \"009\", \"010\", \"011\", \"012\"]\n        }]\n      }, {\n        id: \"fcst\",\n        typeName: \"客观预报\",\n        agings: [{\n          type: \"objectives\",\n          aging: \"001\",\n          agingList: [\"001\", \"002\", \"003\", \"004\", \"005\", \"006\", \"007\", \"008\", \"009\", \"010\", \"011\", \"012\", \"013\", \"014\", \"015\", \"016\", \"017\", \"018\", \"019\", \"020\", \"021\", \"022\", \"023\", \"024\", \"025\", \"026\", \"027\", \"028\", \"029\", \"030\"]\n        }, {\n          type: \"manyMode\",\n          aging: \"006\",\n          agingList: [\"006\", \"007\", \"008\", \"009\", \"010\", \"011\", \"012\", \"013\", \"014\", \"015\", \"016\", \"017\", \"018\", \"019\", \"020\", \"021\"]\n        }]\n      }],\n      currTabId: \"shortTime\",\n      startTime: moment().format(\"YYYY-MM-DD HH\"),\n      area: \"全国\",\n      activeClose: false,\n      // 主图片的路径 和 覆盖图片的路径\n      mainImgPaths: [\"\"],\n      coverImgPaths: [],\n      //用于存储用户操作后产生的数据\n      shortTimeServe: null,\n      shortTimeElement: null,\n      near: null,\n      sounding: null,\n      fcst: null,\n      // 关联时间轴相关\n      concatList: [],\n      noConcatList: [],\n      concatTime: \"\",\n      noConcatTime: \"\",\n      memoryActTime: \"\",\n      memoryFcstTime: \"\",\n      objectiveActTime: null,\n      //客观产品实况时间\n      objectiveFcst: {\n        agingLength: 23,\n        hourList: [],\n        fcstTime: moment()\n      },\n      // 禁用关系时间轴\n      isDisabledRelevance: false,\n      // 用于取消ajax请求\n      cancelMainRequests: [],\n      cancelCoverRequests: [],\n      activeIndex: null,\n      currDate: null,\n      currHour: \"01\",\n      hourList: datas.actHourList,\n      dieSwitch: false,\n      currMinute: \"00\",\n      zoomSw: false,\n      minuteList: [\"00\", \"30\"] // interval: '24h',\n\n    };\n  },\n  computed: _objectSpread({}, mapState([\"zoomSwitch\", \"zoomUrl\"]), {\n    currTabAging: function currTabAging() {\n      var _this = this;\n\n      var currTabAging = this.tabs.find(function (el) {\n        return el.id === _this.currTabId;\n      });\n\n      if (this.currTabId === \"fcst\") {\n        if (this.fcst) return currTabAging.agings.find(function (el) {\n          return el.type === _this.fcst.type;\n        });\n        return null;\n      } else if (this.currTabId === \"sounding\") {\n        if (this.sounding) return currTabAging.agings.find(function (el) {\n          return el.type === _this.sounding.type;\n        });\n        return null;\n      }\n\n      return currTabAging;\n    },\n    fy4Aging: function fy4Aging() {\n      return this.tabs.find(function (el) {\n        return el.id === \"sounding\";\n      }).agings.find(function (el) {\n        return el.type === \"fy4\";\n      }).aging;\n    }\n  }),\n  watch: {\n    mainImgPaths: function mainImgPaths() {\n      this.updata_zoomUrl(this.mainImgPaths[0]);\n    },\n    area: function area() {\n      // alert()\n      this.onAreaChange();\n    }\n  },\n  created: function created() {\n    // requestDatas函数可能在300毫秒多次调用以请求不同的数据，所以在这儿要将节流函数分开\n    this.debouncedRequestMainDatas = _.debounce(this.requestDatas, 300);\n    this.debouncedRequestCoverDatas = _.debounce(this.requestDatas, 300);\n    this.debouncedGetSoundingImgPath = _.debounce(this.getSoundingImgPath, 300);\n  },\n  mounted: function mounted() {\n    var actTime = moment();\n\n    if (actTime.minutes() < 30) {\n      actTime.subtract(1, \"hours\");\n    }\n\n    this.objectiveActTime = actTime.startOf(\"hour\");\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.cancelAllRequest();\n  },\n  methods: _objectSpread({}, mapMutations([\"updata_zoomSwitch\", \"updata_zoomUrl\"]), {\n    show_zoom: function show_zoom() {\n      this.updata_zoomSwitch(true);\n      this.updata_zoomUrl(this.mainImgPaths[0]);\n    },\n    zoom: function zoom(src) {\n      document.querySelector(\".zoomImg\").innerHTML = \"\";\n      this.zoomSw = true;\n      var img = new Image();\n      img.style.height = \"100%\";\n      img.style.width = \"100%\";\n      img.src = src[0];\n      document.querySelector(\".zoomImg\").appendChild(img);\n    },\n    close: function close() {\n      this.updata_zoomSwitch(false);\n    },\n    // zoom(src){\n    //   document.querySelector('.zoomImg').innerHTML=''\n    //   this.zoomSw=true;\n    //   let img=new Image();\n    //   img.style.height='100%';\n    //   // img.style.width='100%';\n    //   img.src=src[0]\n    //   document.querySelector('.zoomImg').appendChild(img)\n    // },\n    select: function select(i) {\n      this.activeClose = !this.activeClose;\n\n      if (this.activeIndex == i) {\n        if (!this.activeClose) {\n          this.activeIndex = null;\n          this.dieSwitch = false; // console.log(this.datas)\n          // alert(options[0].contents[0].hour)\n\n          this.currHour = datas.actHour;\n          this.loginzt = false;\n          this.coverImgPaths = [];\n          this.activeClose = false;\n        }\n      } else {\n        // let value=JSON.parse(JSON.stringify(options[0].contents[0].date))\n        this.currHour = moment(this.shortTimeElement.forecastTime).format('HH'); // console.log(this.shortTimeElement)\n\n        this.currDate = moment(this.shortTimeElement.forecastTime);\n\n        if (i === 1) {\n          this.loginzt = true;\n          this.dieFn(moment(this.currDate).format(\"YYYY-MM-DD HH:00:00\"));\n        } else {\n          // this.login_switch=true\n          this.loginFn(moment(this.currDate).format(\"YYYY-MM-DD HH:\".concat(this.currMinute, \":00\")));\n          this.loginzt = false;\n        }\n\n        this.activeIndex = i;\n      }\n    },\n    changDate: function changDate(i) {\n      var time = moment(this.currDate.format(\"YYYYMMDD\"), \"YYYYMMDD\").add(this.currHour, \"hours\");\n\n      if (i === 1) {\n        time.add(1, \"hours\");\n      } else {\n        time.subtract(1, \"hours\");\n      }\n\n      this.currDate = time;\n      this.currHour = time.format(\"HH\");\n\n      if (this.activeIndex == 2) {\n        this.loginFn(moment(this.currDate).format(\"YYYY-MM-DD HH:mm:ss\"));\n      } else if (this.activeIndex == 1) {\n        this.dieFn(moment(this.currDate).format(\"YYYY-MM-DD HH:mm:ss\"));\n      } // this.$emit('dieFn',this.interval,moment(this.currDate).format('YYYY-MM-DD HH:mm:ss'))\n\n    },\n    changeHour: function changeHour() {\n      if (this.activeIndex == 1) {\n        this.dieFn(moment(moment(this.currDate).format(\"YYYY-MM-DD 00:00:00\")).add(this.currHour, \"hour\").format(\"YYYY-MM-DD HH:00:00\"));\n      } else {\n        this.loginFn(moment(moment(this.currDate).format(\"YYYY-MM-DD 00:00:00\")).add(this.currMinute, \"minute\").add(this.currHour, \"hour\").format(\"YYYY-MM-DD HH:mm:00\"));\n      }\n    },\n    dieFn: function dieFn(date) {\n      var _this2 = this;\n\n      // console.log(date)\n      // document.querySelector('.imgDie').innerHTML = ''\n      this.coverImgPaths = []; // console.log(interval, date)\n\n      if (date) {\n        this.dieSwitch = true;\n        var data = {\n          modeName: \"qiangtianqi\",\n          eleName: \"OBSoverlay:\\u5B9E\\u51B5\\u53E0\\u52A0:01h:\".concat(this.area),\n          forecastTime: date,\n          level: \"\",\n          userDefinedParas: \"\",\n          strTime: date,\n          symbol: 1\n        };\n        var params = new URLSearchParams();\n\n        for (var key in data) {\n          params.append(key, data[key]);\n        }\n\n        axios.post(\"/proxy/10.20.67.111/PictureInfoForgetFilePath.action\", params).then(function (res) {\n          // console.log(res.data.path.split(','))\n          if (res.data.path) {\n            _this2.coverImgPaths.push(\"http://10.20.67.111/getPic.action2?ppath=\".concat(res.data.path.split(',')[5])); // let img = new Image()\n            // img.src = `http://10.20.67.111/getPic.action2?ppath=${res.data.path.split(',')[5]}`\n            // img.style.cssText = 'width:100%;height:100%;'\n            // // this.dieImgSrc=`http://10.20.67.111/getPic.action2?ppath=\\\\${res.data.path.split(',')[5]}`\n            // img.onload = () => {\n            //   document.querySelector('.imgDie').appendChild(img)\n            // }\n            // img.onerror = () => {\n            //   img.src = require('../../assets/images/404.png')\n            //   document.querySelector('.imgDie').appendChild(img)\n            // }\n\n          }\n        });\n      } else {\n        this.dieSwitch = false;\n      }\n    },\n    loginFn: function loginFn(date) {\n      var _this3 = this;\n\n      // if (this.loginzt) {\n      this.coverImgPaths = [];\n\n      if (date) {\n        this.dieSwitch = true;\n        var data = {\n          'modeName': 'qiangtianqi',\n          'eleName': \"OBSoverlay:\\u96F7\\u8FBE\\u53E0\\u52A0:\".concat(this.area),\n          'forecastTime': date,\n          'level': '',\n          'userDefinedParas': '',\n          'strTime': date,\n          'symbol': 1\n        };\n        var params = new URLSearchParams();\n\n        for (var key in data) {\n          params.append(key, data[key]);\n        }\n\n        axios.post(\"/proxy/10.20.67.111/PictureInfoForgetFilePath.action\", params).then(function (res) {\n          // console.log(res.data.path.split(','))\n          _this3.coverImgPaths.push(\"http://10.20.67.111/getPic.action2?ppath=\".concat(res.data.path.split(',')[5])); // let img = new Image()\n          // img.src = `http://10.20.67.111/getPic.action2?ppath=${res.data.path.split(',')[5]}`\n          // img.style.cssText = 'width:100%;height:100%;'\n          // // this.dieImgSrc=`http://10.20.67.111/getPic.action2?ppath=\\\\${res.data.path.split(',')[5]}`\n          // img.onload = () => {\n          //   document.querySelector('.imgDie').appendChild(img)\n          // }\n          // img.onerror = () => {\n          //   img.src = require('../../assets/images/404.png')\n          //   document.querySelector('.imgDie').appendChild(img)\n          // }\n\n        });\n      } // } else {\n      //   if (interval && date) {\n      //     this.login_data = {\n      //       interval, date\n      //     }\n      //     this.login_switch = true\n      //   } else {\n      //     this.dieSwitch = false\n      //     this.login_switch = false\n      //   }\n      // }\n\n    },\n    // 时间轴时间改变时\n    onWholeAgingChange: function onWholeAgingChange() {\n      this.gatherParams();\n    },\n    // 关联时间轴时间改变时\n    onRelevanceAgingChange: function onRelevanceAgingChange(e) {\n      // console.log(e);\n      if (this.shortTimeElement.type === \"objectives\") {\n        this.shortTimeElement.dataType = e.isFcst ? \"预报\" : \"实况\";\n        this.shortTimeElement.forecastTime = e.time;\n        this.gatherParams();\n      }\n    },\n    // 短时_客观产品_实况和模式时间选择\n    onObjectiveTimeSelect: function onObjectiveTimeSelect(item) {\n      var fcstTime = \"\",\n          startTime = \"\";\n      var objActTime = this.objectiveActTime,\n          objFcstTime = this.objectiveFcst.fcstTime;\n\n      if (objActTime && objActTime.isValid()) {\n        fcstTime = objActTime.format(\"YYYY-MM-DD HH:mm:ss\");\n      }\n\n      if (objFcstTime && objFcstTime.isValid()) {\n        startTime = objFcstTime.format(\"YYYY-MM-DD HH:mm:ss\");\n      }\n\n      if (this.shortTimeElement.type === \"objectives\") {\n        this.shortTimeElement.dataType = item.isFcst ? \"预报\" : \"实况\";\n        this.shortTimeElement.forecastTime = fcstTime;\n        this.shortTimeElement.strTime = startTime;\n        this.gatherParams();\n      }\n    },\n    // 切换tab时\n    onTabsChange: function onTabsChange() {\n      if (this.currTabId === \"shortTime\") {\n        this.gatherParams(\"fcstServe\");\n      } else {\n        this.mainImgPaths = [\"\"];\n        this.coverImgPaths = [];\n      }\n\n      this.gatherParams();\n    },\n    // 区域改变时\n    onAreaChange: function onAreaChange() {\n      if (this.shortTimeElement.type === \"relation\") {\n        this.gatherParams();\n      }\n    },\n    // 切换图片\n    onSwitchImg: function onSwitchImg(sign) {\n      if (this.currTabId === \"shortTime\") {\n        if (sign === \"left\") {\n          this.$refs.relevanceAgingSelect.tuningTime(-1);\n        } else if (sign === \"right\") {\n          this.$refs.relevanceAgingSelect.tuningTime(1);\n        }\n      } else {\n        if (sign === \"left\") {\n          this.$refs.wholeAgingSelect.onTuningAging(-1);\n        } else if (sign === \"right\") {\n          this.$refs.wholeAgingSelect.onTuningAging(1);\n        }\n      }\n    },\n    // 用户操作短时tab触发的事件(data.type有三个值：'relation': '中分析产品(自动站客观分析)', 'objectives': '客观产品', 'fcstServe': '预报服务')\n    onShortTimeChange: function onShortTimeChange(data) {\n      this.isDisabledRelevance = data.type === \"relation\"; // 更新关联时间轴上的时间\n\n      if (data.type === \"objectives\") {\n        var agingLength = 23; //多模式的时候时效长度为23\n\n        if (_Array$isArray(data.patterns) && data.patterns.length === 1) {\n          var name = data.patterns[0];\n          var nameAgingHash = {\n            Grapes: 30,\n            广东: 36,\n            上海: 72,\n            上海3KM: 24,\n            北京: 36,\n            北京3KM: 24,\n            广州: 36,\n            广州3KM: 12\n          };\n          agingLength = nameAgingHash[name];\n        } // console.log(\"------\");\n        // console.log(data);\n\n\n        this.objectiveFcst = {\n          agingLength: agingLength,\n          startHourList: data.startHourList,\n          fcstTime: moment(data.strTime, \"YYYY-MM-DD HH:mm:ss\")\n        }; // // console.log(agingLength);\n        // const latestActTime = moment(data.forecastTime, \"YYYY-MM-DD HH:mm:ss\");\n        // const latestFcstTime = moment(data.strTime, \"YYYY-MM-DD HH:mm:ss\");\n        // const fcstConcatList = new Array(agingLength).fill(0).map((el, i) => {\n        //   const currTime = latestActTime.clone().add(i + 1, \"hours\");\n        //   return {\n        //     name: currTime.format(\"HH\"),\n        //     time: currTime.format(\"YYYY-MM-DD HH:mm:ss\"),\n        //     isFcst: true,\n        //     active: false\n        //   };\n        // });\n        // const isHasFcstTime = latestFcstTime.isValid();\n        // const fcstNoConcatList = new Array(agingLength).fill(0).map((el, i) => {\n        //   if (isHasFcstTime) {\n        //     const currTime = latestFcstTime.clone().add(i + 1, \"hours\");\n        //     return {\n        //       name: \"+\" + (i + 1),\n        //       time: currTime.format(\"YYYY-MM-DD HH:mm:ss\"),\n        //       isFcst: true,\n        //       active: false\n        //     };\n        //   }\n        //   return {\n        //     name: \"+\" + (i + 1),\n        //     time: \"\",\n        //     isFcst: true,\n        //     active: false\n        //   };\n        // });\n        // this.concatList = [\n        //   ...this.getActTimeList(latestActTime),\n        //   ...fcstConcatList\n        // ];\n        // this.noConcatList = [\n        //   ...this.getActTimeList(latestActTime),\n        //   ...fcstNoConcatList\n        // ];\n        // console.log(this.concatList);\n        // console.log(this.noConcatList);\n        // 因为data.forecastTime中的时间始终是初始时间，所以在这需要获取当前关联时间轴上选中的时间，以及\n        // 还要同时更新data.dataType\n        // const currActiveItem = data.isConcat\n        //   ? this.concatList.find(el => el.active)\n        //   : this.noConcatList.find(el => el.active);\n        // data.forecastTime = currActiveItem.time;\n        // data.dataType = currActiveItem.isFcst ? \"预报\" : \"实况\";\n      } // 存储用户操作后的结果\n\n\n      if (data.type === \"fcstServe\") {\n        this.shortTimeServe = data;\n      } else {\n        this.shortTimeElement = data; // console.log(this.shortTimeElement);\n      } // 将用户操作结果转化为请求接口的参数\n\n\n      this.gatherParams(data.type);\n    },\n    onNearChange: function onNearChange(data) {\n      this.near = data;\n      this.gatherParams();\n    },\n    onFcstChange: function onFcstChange(data) {\n      this.fcst = data;\n      this.gatherParams();\n    },\n    onSoundingChange: function onSoundingChange(data) {\n      this.sounding = data;\n      this.gatherParams();\n    },\n    // 得到实况时间列表\n    getActTimeList: function getActTimeList(date) {\n      return new Array(3).fill(0).map(function (el, i) {\n        var currTime = date.clone().subtract(i, \"hours\");\n        return {\n          name: currTime.format(\"HH\"),\n          time: currTime.format(\"YYYY-MM-DD HH:mm:ss\"),\n          isFcst: false,\n          active: i === 0\n        };\n      }).reverse();\n    },\n    // 将用户操作结果转化为请求接口的参数\n    gatherParams: function gatherParams(sign) {\n      // 主图列表，覆盖图列表\n      var mainParams = [],\n          coverParams = [];\n\n      switch (this.currTabId) {\n        case \"shortTime\":\n          // 预报服务\n          if (sign === \"fcstServe\") {\n            if (this.shortTimeServe.isHasActive) {\n              var _this$shortTimeServe = this.shortTimeServe,\n                  _strTime = _this$shortTimeServe.strTime,\n                  _forecastTime = _this$shortTimeServe.forecastTime,\n                  _eleName = _this$shortTimeServe.eleName;\n              coverParams = [{\n                modeName: \"qiangtianqi\",\n                level: \"\",\n                userDefinedParas: \"\",\n                strTime: _strTime,\n                forecastTime: _forecastTime,\n                eleName: _eleName\n              }];\n            } else {\n              this.coverImgPaths = [];\n            }\n\n            break;\n          } // 客观产品\n\n\n          var startTime = \"\";\n          var objFcstTime = this.objectiveFcst.fcstTime;\n\n          if (objFcstTime.isValid()) {\n            startTime = objFcstTime.format(\"YYYY-MM-DD HH:mm:ss\");\n          }\n\n          if (this.shortTimeElement.type === \"objectives\") {\n            this.shortTimeElement.strTime = startTime;\n          }\n\n          var _this$shortTimeElemen = this.shortTimeElement,\n              eleName = _this$shortTimeElemen.eleName,\n              forecastTime = _this$shortTimeElemen.forecastTime,\n              patterns = _this$shortTimeElemen.patterns,\n              strTime = _this$shortTimeElemen.strTime,\n              type = _this$shortTimeElemen.type,\n              dataType = _this$shortTimeElemen.dataType,\n              classifyId = _this$shortTimeElemen.classifyId;\n\n          if (type === \"relation\") {\n            mainParams = [{\n              modeName: \"qiangtianqi\",\n              eleName: \"OBSanaly:FenXizidongzhanHB:\" + this.area + \":\" + eleName,\n              strTime: strTime,\n              forecastTime: forecastTime,\n              level: \"\",\n              userDefinedParas: \"\",\n              symbol: \"1\"\n            }];\n          } else if (type === \"objectives\") {\n            if (patterns) {\n              mainParams = patterns.map(function (pt) {\n                return {\n                  modeName: \"qiangtianqi\",\n                  eleName: \"shortandnowcastforecast:shorttimeforecast:\" + dataType + \":\" + (dataType === \"实况\" ? eleName : eleName + \"四面图:\" + pt),\n                  strTime: dataType === \"实况\" ? forecastTime : strTime,\n                  forecastTime: forecastTime,\n                  level: \"\",\n                  userDefinedParas: \"\",\n                  symbol: \"1\"\n                };\n              });\n            } else {\n              mainParams = [{\n                modeName: \"qiangtianqi\",\n                eleName: \"shortandnowcastforecast:shorttimeforecast:\" + dataType + \":\" + eleName + (classifyId === \"analyze\" ? \":\" + this.area : \"\"),\n                strTime: dataType === \"实况\" ? forecastTime : strTime,\n                forecastTime: forecastTime,\n                level: \"\",\n                userDefinedParas: \"\",\n                symbol: \"1\"\n              }];\n            }\n          }\n\n          break;\n\n        case \"near\":\n          if (!this.near) break;\n          this.startTime = this.near.startTime.format(\"YYYY-MM-DD HH\");\n          mainParams = [{\n            modeName: \"qiangtianqi\",\n            eleName: \"shortandnowcastforecast:shorttimeforecast:预报:\" + this.near.elementName + \":\" + this.area,\n            strTime: this.near.startTime.format(\"YYYY-MM-DD HH:mm:ss\"),\n            forecastTime: this.near.startTime.clone().add(+this.currTabAging.aging, \"hours\").format(\"YYYY-MM-DD HH:mm:ss\"),\n            level: \"\",\n            userDefinedParas: \"\",\n            symbol: \"1\"\n          }];\n          break;\n\n        case \"sounding\":\n          if (!this.sounding) break;\n          this.startTime = this.sounding.startTime.format(\"YYYY-MM-DD HH\");\n          var sdType = this.sounding.type;\n          var paths = \"http://10.20.67.111/getPic.action2?ppath=\";\n\n          if (sdType === \"act\") {\n            paths += \"\\\\\\\\10.20.90.82\\\\operation\\\\SWPCImage\\\\ShortTime\\\\TlnP\\\\OBS\\\\TlnP_\".concat(this.sounding.id, \"_\").concat(this.sounding.startTime.format(\"YYYYMMDDHH\"), \".png\");\n          } else if (sdType === \"fcst\") {\n            if (this.sounding.showType === \"NCEP\") {\n              paths += \"\\\\\\\\10.20.90.82\\\\operation\\\\SWPCImage\\\\ShortTime\\\\TlnP\\\\Forecast\\\\NCEP\\\\Sketch\\\\NCEP_TlnP_\".concat(this.sounding.id, \"_\").concat(this.sounding.startTime.format(\"YYYYMMDDHH\"), \"_\").concat(this.currTabAging.aging, \".png\");\n            } else if (this.sounding.showType === \"List\") {\n              paths += \"\\\\\\\\10.20.90.82\\\\operation\\\\SWPCImage\\\\ShortTime\\\\TlnP\\\\Forecast\\\\NCEP\\\\List\\\\NCEP_TlnP_List_\".concat(this.sounding.id, \"_\").concat(this.sounding.startTime.format(\"YYYYMMDDHH\"), \"_000_048.png\");\n            }\n          } else if (sdType === \"fy4\") {\n            paths += \"D:\\\\operation\\\\FY4OBS\\\\TlnP_\".concat(this.sounding.id, \"_\").concat(this.sounding.startTime.format(\"YYYYMMDDHH\"), \"_\").concat(this.currTabAging.aging, \".png\");\n          }\n\n          this.debouncedGetSoundingImgPath(paths);\n          return;\n        //退出函数\n\n        case \"fcst\":\n          if (!this.fcst) break;\n          this.startTime = this.fcst.startTime.format(\"YYYY-MM-DD HH\");\n          mainParams = [{\n            modeName: \"qiangtianqi\",\n            eleName: this.fcst.eleName,\n            strTime: this.fcst.startTime.format(\"YYYY-MM-DD HH:mm:ss\"),\n            forecastTime: this.fcst.startTime.clone().add(+this.currTabAging.aging, \"hours\").format(\"YYYY-MM-DD HH:mm:ss\"),\n            level: \"\",\n            userDefinedParas: \"\",\n            symbol: \"1\"\n          }];\n          break;\n      }\n\n      if (mainParams.length) {\n        this.debouncedRequestMainDatas(\"main\", mainParams);\n      }\n\n      if (coverParams.length) {\n        this.debouncedRequestCoverDatas(\"cover\", coverParams);\n      }\n    },\n    // 得到探空图片路径\n    getSoundingImgPath: function getSoundingImgPath(paths) {\n      this.mainImgPaths = [paths];\n    },\n    // 请求数据\n    requestDatas: function requestDatas(type, params) {\n      var _this4 = this;\n\n      this.cancelAllRequest(type);\n      var CancelToken = axios.CancelToken;\n      var allRequestList = params.map(function (param) {\n        var body = new URLSearchParams();\n\n        for (var key in param) {\n          body.append(key, param[key]);\n        }\n\n        return axios.post(\"/proxy/10.20.67.111/PictureInfoForgetFilePath.action\", body, {\n          cancelToken: new CancelToken(function (c) {\n            if (type === \"main\") {\n              _this4.cancelMainRequests.push(c);\n            } else if (type === \"cover\") {\n              _this4.cancelCoverRequests.push(c);\n            }\n          })\n        });\n      });\n      axios.all(allRequestList).then(function (datas) {\n        var imgSrcs = datas.map(function (data) {\n          if (!data.data.path) return \"\"; // [模式名字 要素名字  发布时间  预报时间 层次  文件路径]\n\n          var _data$data$path$split = data.data.path.split(\",\"),\n              _data$data$path$split2 = _slicedToArray(_data$data$path$split, 6),\n              patternName = _data$data$path$split2[0],\n              eleName = _data$data$path$split2[1],\n              startTime = _data$data$path$split2[2],\n              fcstTime = _data$data$path$split2[3],\n              level = _data$data$path$split2[4],\n              filePath = _data$data$path$split2[5];\n\n          return \"http://10.20.67.111/getPic.action2?ppath=\" + filePath;\n        });\n\n        if (type === \"main\") {\n          _this4.mainImgPaths = imgSrcs;\n        } else if (type === \"cover\") {\n          _this4.coverImgPaths = imgSrcs;\n        }\n      });\n    },\n    // 取消所有请求\n    cancelAllRequest: function cancelAllRequest(type) {\n      if (type === \"main\" && this.cancelMainRequests.length) {\n        this.cancelMainRequests.forEach(function (el) {\n          return el();\n        });\n        this.cancelMainRequests = [];\n      }\n\n      if (type === \"cover\" && this.cancelCoverRequests.length) {\n        this.cancelCoverRequests.forEach(function (el) {\n          return el();\n        });\n        this.cancelCoverRequests = [];\n      }\n    },\n    // 更新时效\n    updateAging: function updateAging() {\n      var _this5 = this;\n\n      if (this.currTabId === \"shortTime\") return;\n      var currTabAging = this.tabs.find(function (tab) {\n        return tab.id === _this5.currTabId;\n      });\n    }\n  })\n};",{"version":3,"sources":["D:\\program\\frontend\\src\\views\\shortimpending\\shortimpending.js"],"names":["moment","axios","ShortTime","datas","Near","Sounding","Fcst","ToolBtn","_","createNamespacedHelpers","mapState","mapGetters","mapMutations","WholeAgingSelect","LevelSelect","AreaSelect","ImgShow","RelevanceAgingSelect","name","components","data","areaList","label","value","disabled","tabs","id","typeName","aging","agingList","agings","type","currTabId","startTime","format","area","activeClose","mainImgPaths","coverImgPaths","shortTimeServe","shortTimeElement","near","sounding","fcst","concatList","noConcatList","concatTime","noConcatTime","memoryActTime","memoryFcstTime","objectiveActTime","objectiveFcst","agingLength","hourList","fcstTime","isDisabledRelevance","cancelMainRequests","cancelCoverRequests","activeIndex","currDate","currHour","actHourList","dieSwitch","currMinute","zoomSw","minuteList","computed","currTabAging","find","el","fy4Aging","watch","updata_zoomUrl","onAreaChange","created","debouncedRequestMainDatas","debounce","requestDatas","debouncedRequestCoverDatas","debouncedGetSoundingImgPath","getSoundingImgPath","mounted","actTime","minutes","subtract","startOf","beforeDestroy","cancelAllRequest","methods","show_zoom","updata_zoomSwitch","zoom","src","document","querySelector","innerHTML","img","Image","style","height","width","appendChild","close","select","i","actHour","loginzt","forecastTime","dieFn","loginFn","changDate","time","add","changeHour","date","modeName","eleName","level","userDefinedParas","strTime","symbol","params","URLSearchParams","key","append","post","then","res","path","push","split","onWholeAgingChange","gatherParams","onRelevanceAgingChange","e","dataType","isFcst","onObjectiveTimeSelect","item","objActTime","objFcstTime","isValid","onTabsChange","onSwitchImg","sign","$refs","relevanceAgingSelect","tuningTime","wholeAgingSelect","onTuningAging","onShortTimeChange","patterns","length","nameAgingHash","Grapes","广东","上海","上海3KM","北京","北京3KM","广州","广州3KM","startHourList","onNearChange","onFcstChange","onSoundingChange","getActTimeList","Array","fill","map","currTime","clone","active","reverse","mainParams","coverParams","isHasActive","classifyId","pt","elementName","sdType","paths","showType","CancelToken","allRequestList","param","body","cancelToken","c","all","imgSrcs","patternName","filePath","forEach","updateAging","tab"],"mappings":"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","sourcesContent":["import * as moment from \"moment\";\r\nimport * as axios from \"axios\";\r\nimport ShortTime from \"./short-time/ShortTime.vue\";\r\nimport datas from \"./short-time/datas.js\";\r\nimport Near from \"./near/Near.vue\";\r\nimport Sounding from \"./sounding/Sounding.vue\";\r\nimport Fcst from \"./fcst/Fcst.vue\";\r\nimport { ToolBtn } from \"../../components/base\";\r\nimport _ from \"lodash\";\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nconst { mapState, mapGetters, mapMutations } = createNamespacedHelpers(\r\n  \"synthesis\"\r\n);\r\nimport {\r\n  WholeAgingSelect,\r\n  LevelSelect,\r\n  AreaSelect,\r\n  ImgShow,\r\n  RelevanceAgingSelect\r\n} from \"../../components/share\";\r\n\r\nexport default {\r\n  name: \"shortimpending\",\r\n  components: {\r\n    ShortTime,\r\n    Near,\r\n    Sounding,\r\n    Fcst,\r\n    WholeAgingSelect,\r\n    LevelSelect,\r\n    AreaSelect,\r\n    ImgShow,\r\n    RelevanceAgingSelect,\r\n    ToolBtn\r\n  },\r\n  data() {\r\n    return {\r\n      // activeIndex:null,\r\n      areaList: [\r\n        {\r\n          label: \"全国\",\r\n          value: \"全国\",\r\n          disabled: false\r\n        },\r\n        {\r\n          label: \"华北\",\r\n          value: \"华北\",\r\n          disabled: false\r\n        },\r\n        {\r\n          label: \"东北\",\r\n          value: \"东北\",\r\n          disabled: false\r\n        },\r\n        {\r\n          label: \"华东\",\r\n          value: \"华东\",\r\n          disabled: false\r\n        },\r\n        {\r\n          label: \"华南\",\r\n          value: \"华南\",\r\n          disabled: false\r\n        },\r\n        {\r\n          label: \"西南\",\r\n          value: \"西南\",\r\n          disabled: false\r\n        },\r\n        {\r\n          label: \"西北\",\r\n          value: \"西北\",\r\n          disabled: false\r\n        },\r\n        {\r\n          label: \"青藏\",\r\n          value: \"青藏\",\r\n          disabled: false\r\n        },\r\n        {\r\n          label: \"新疆\",\r\n          value: \"新疆\",\r\n          disabled: false\r\n        },\r\n        {\r\n          label: \"近海\",\r\n          value: \"近海\",\r\n          disabled: false\r\n        }\r\n      ],\r\n      tabs: [\r\n        {\r\n          id: \"shortTime\",\r\n          typeName: \"短时\",\r\n          // 该处时效是没有用的，在这只是为了占位，避免ImgShow组件报错\r\n          aging: \"001\",\r\n          agingList: [\"001\", \"002\", \"003\"]\r\n        },\r\n        {\r\n          id: \"near\",\r\n          typeName: \"临近\",\r\n          aging: \"060\",\r\n          agingList: [\"060\", \"090\", \"120\"]\r\n        },\r\n        {\r\n          id: \"sounding\",\r\n          typeName: \"探空\",\r\n          agings: [\r\n            {\r\n              // 该处时效是没有用的，在这只是为了占位，避免ImgShow组件报错\r\n              type: \"act\",\r\n              aging: \"000\",\r\n              agingList: [\r\n                \"000\",\r\n                \"003\",\r\n                \"006\",\r\n                \"009\",\r\n                \"012\",\r\n                \"015\",\r\n                \"018\",\r\n                \"021\",\r\n                \"024\",\r\n                \"027\",\r\n                \"030\",\r\n                \"033\",\r\n                \"036\",\r\n                \"039\",\r\n                \"042\",\r\n                \"045\",\r\n                \"048\"\r\n              ]\r\n            },\r\n            {\r\n              type: \"fcst\",\r\n              aging: \"000\",\r\n              agingList: [\r\n                \"000\",\r\n                \"003\",\r\n                \"006\",\r\n                \"009\",\r\n                \"012\",\r\n                \"015\",\r\n                \"018\",\r\n                \"021\",\r\n                \"024\",\r\n                \"027\",\r\n                \"030\",\r\n                \"033\",\r\n                \"036\",\r\n                \"039\",\r\n                \"042\",\r\n                \"045\",\r\n                \"048\"\r\n              ]\r\n            },\r\n            {\r\n              type: \"fy4\",\r\n              aging: \"006\",\r\n              agingList: [\"006\", \"007\", \"008\", \"009\", \"010\", \"011\", \"012\"]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          id: \"fcst\",\r\n          typeName: \"客观预报\",\r\n          agings: [\r\n            {\r\n              type: \"objectives\",\r\n              aging: \"001\",\r\n              agingList: [\r\n                \"001\",\r\n                \"002\",\r\n                \"003\",\r\n                \"004\",\r\n                \"005\",\r\n                \"006\",\r\n                \"007\",\r\n                \"008\",\r\n                \"009\",\r\n                \"010\",\r\n                \"011\",\r\n                \"012\",\r\n                \"013\",\r\n                \"014\",\r\n                \"015\",\r\n                \"016\",\r\n                \"017\",\r\n                \"018\",\r\n                \"019\",\r\n                \"020\",\r\n                \"021\",\r\n                \"022\",\r\n                \"023\",\r\n                \"024\",\r\n                \"025\",\r\n                \"026\",\r\n                \"027\",\r\n                \"028\",\r\n                \"029\",\r\n                \"030\"\r\n              ]\r\n            },\r\n            {\r\n              type: \"manyMode\",\r\n              aging: \"006\",\r\n              agingList: [\r\n                \"006\",\r\n                \"007\",\r\n                \"008\",\r\n                \"009\",\r\n                \"010\",\r\n                \"011\",\r\n                \"012\",\r\n                \"013\",\r\n                \"014\",\r\n                \"015\",\r\n                \"016\",\r\n                \"017\",\r\n                \"018\",\r\n                \"019\",\r\n                \"020\",\r\n                \"021\"\r\n              ]\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      currTabId: \"shortTime\",\r\n      startTime: moment().format(\"YYYY-MM-DD HH\"),\r\n      area: \"全国\",\r\n      activeClose:false,\r\n\r\n      // 主图片的路径 和 覆盖图片的路径\r\n      mainImgPaths: [\"\"],\r\n      coverImgPaths: [],\r\n\r\n      //用于存储用户操作后产生的数据\r\n      shortTimeServe: null,\r\n      shortTimeElement: null,\r\n      near: null,\r\n      sounding: null,\r\n      fcst: null,\r\n\r\n      // 关联时间轴相关\r\n      concatList: [],\r\n      noConcatList: [],\r\n      concatTime: \"\",\r\n      noConcatTime: \"\",\r\n      memoryActTime: \"\",\r\n      memoryFcstTime: \"\",\r\n      objectiveActTime: null, //客观产品实况时间\r\n      objectiveFcst: {\r\n        agingLength: 23,\r\n        hourList: [],\r\n        fcstTime: moment()\r\n      },\r\n      // 禁用关系时间轴\r\n      isDisabledRelevance: false,\r\n\r\n      // 用于取消ajax请求\r\n      cancelMainRequests: [],\r\n      cancelCoverRequests: [],\r\n      activeIndex: null,\r\n      currDate: null,\r\n      currHour: \"01\",\r\n      hourList: datas.actHourList,\r\n      dieSwitch: false,\r\n      currMinute: \"00\",\r\n      zoomSw: false,\r\n      minuteList: [\"00\", \"30\"]\r\n      // interval: '24h',\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\"zoomSwitch\",\"zoomUrl\"]),\r\n    currTabAging() {\r\n      const currTabAging = this.tabs.find(el => el.id === this.currTabId);\r\n      if (this.currTabId === \"fcst\") {\r\n        if (this.fcst)\r\n          return currTabAging.agings.find(el => el.type === this.fcst.type);\r\n        return null;\r\n      } else if (this.currTabId === \"sounding\") {\r\n        if (this.sounding)\r\n          return currTabAging.agings.find(el => el.type === this.sounding.type);\r\n        return null;\r\n      }\r\n      return currTabAging;\r\n    },\r\n    fy4Aging() {\r\n      return this.tabs\r\n        .find(el => el.id === \"sounding\")\r\n        .agings.find(el => el.type === \"fy4\").aging;\r\n    }\r\n  },\r\n  watch: {\r\n    mainImgPaths(){\r\n      this.updata_zoomUrl(this.mainImgPaths[0])\r\n    },\r\n    area(){\r\n      // alert()\r\n      this.onAreaChange()\r\n    }\r\n  },\r\n  created() {\r\n    // requestDatas函数可能在300毫秒多次调用以请求不同的数据，所以在这儿要将节流函数分开\r\n    this.debouncedRequestMainDatas = _.debounce(this.requestDatas, 300);\r\n    this.debouncedRequestCoverDatas = _.debounce(this.requestDatas, 300);\r\n    this.debouncedGetSoundingImgPath = _.debounce(this.getSoundingImgPath, 300);\r\n  },\r\n  mounted() {\r\n    let actTime = moment();\r\n    if (actTime.minutes() < 30) {\r\n      actTime.subtract(1, \"hours\");\r\n    }\r\n    this.objectiveActTime = actTime.startOf(\"hour\");\r\n  },\r\n\r\n\r\n\r\n\r\n  beforeDestroy() {\r\n    this.cancelAllRequest();\r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations([\"updata_zoomSwitch\",\"updata_zoomUrl\"]),\r\n    show_zoom(){\r\n      this.updata_zoomSwitch(true)\r\n      this.updata_zoomUrl(this.mainImgPaths[0])\r\n\t},\r\n    zoom(src) {\r\n      document.querySelector(\".zoomImg\").innerHTML = \"\";\r\n      this.zoomSw = true;\r\n      let img = new Image();\r\n      img.style.height = \"100%\";\r\n      img.style.width = \"100%\";\r\n      img.src = src[0];\r\n      document.querySelector(\".zoomImg\").appendChild(img);\r\n\r\n    },\r\n    close(){\r\n      this.updata_zoomSwitch(false)\r\n    },\r\n    // zoom(src){\r\n    //   document.querySelector('.zoomImg').innerHTML=''\r\n    //   this.zoomSw=true;\r\n    //   let img=new Image();\r\n    //   img.style.height='100%';\r\n    //   // img.style.width='100%';\r\n    //   img.src=src[0]\r\n    //   document.querySelector('.zoomImg').appendChild(img)\r\n    // },\r\n    select(i) {\r\n      this.activeClose=!this.activeClose\r\n      if (this.activeIndex == i) {\r\n        if(!this.activeClose){\r\n          this.activeIndex = null;\r\n          this.dieSwitch = false;\r\n          // console.log(this.datas)\r\n          // alert(options[0].contents[0].hour)\r\n          this.currHour = datas.actHour;\r\n          this.loginzt = false;\r\n          this.coverImgPaths=[]\r\n          this.activeClose=false\r\n        }\r\n      } else {\r\n        // let value=JSON.parse(JSON.stringify(options[0].contents[0].date))\r\n        this.currHour = moment(this.shortTimeElement.forecastTime).format('HH')\r\n        // console.log(this.shortTimeElement)\r\n        this.currDate = moment(this.shortTimeElement.forecastTime);\r\n        if (i === 1) {\r\n          this.loginzt = true;\r\n          this.dieFn(moment(this.currDate).format(\"YYYY-MM-DD HH:00:00\"));\r\n        } else {\r\n          // this.login_switch=true\r\n          this.loginFn(\r\n            moment(this.currDate).format(`YYYY-MM-DD HH:${this.currMinute}:00`)\r\n          );\r\n          this.loginzt = false;\r\n        }\r\n        this.activeIndex = i;\r\n      }\r\n    },\r\n    changDate(i) {\r\n      const time = moment(this.currDate.format(\"YYYYMMDD\"), \"YYYYMMDD\").add(\r\n        this.currHour,\r\n        \"hours\"\r\n      );\r\n      if (i === 1) {\r\n        time.add(1, \"hours\");\r\n      } else {\r\n        time.subtract(1, \"hours\");\r\n      }\r\n      this.currDate = time;\r\n      this.currHour = time.format(\"HH\");\r\n      if (this.activeIndex == 2) {\r\n        this.loginFn(moment(this.currDate).format(\"YYYY-MM-DD HH:mm:ss\"));\r\n      } else if (this.activeIndex == 1) {\r\n        this.dieFn(moment(this.currDate).format(\"YYYY-MM-DD HH:mm:ss\"));\r\n      }\r\n      // this.$emit('dieFn',this.interval,moment(this.currDate).format('YYYY-MM-DD HH:mm:ss'))\r\n    },\r\n    changeHour() {\r\n      if (this.activeIndex == 1) {\r\n        this.dieFn(\r\n          moment(moment(this.currDate).format(\"YYYY-MM-DD 00:00:00\"))\r\n            .add(this.currHour, \"hour\")\r\n            .format(\"YYYY-MM-DD HH:00:00\")\r\n        );\r\n      } else {\r\n        this.loginFn(\r\n          moment(moment(this.currDate).format(\"YYYY-MM-DD 00:00:00\"))\r\n            .add(this.currMinute, \"minute\")\r\n            .add(this.currHour, \"hour\")\r\n            .format(\"YYYY-MM-DD HH:mm:00\")\r\n        );\r\n      }\r\n    },\r\n    dieFn(date) {\r\n      // console.log(date)\r\n      // document.querySelector('.imgDie').innerHTML = ''\r\n      this.coverImgPaths=[]\r\n\r\n      // console.log(interval, date)\r\n      if (date) {\r\n        this.dieSwitch = true;\r\n        let data = {\r\n          modeName: \"qiangtianqi\",\r\n          eleName: `OBSoverlay:实况叠加:01h:${this.area}`,\r\n          forecastTime: date,\r\n          level: \"\",\r\n          userDefinedParas: \"\",\r\n          strTime: date,\r\n          symbol: 1\r\n        };\r\n        const params = new URLSearchParams();\r\n        for (const key in data) {\r\n          params.append(key, data[key]);\r\n        }\r\n        axios.post(`/proxy/10.20.67.111/PictureInfoForgetFilePath.action`, params).then(res => {\r\n          // console.log(res.data.path.split(','))\r\n          if(res.data.path){\r\n            this.coverImgPaths.push(`http://10.20.67.111/getPic.action2?ppath=${res.data.path.split(',')[5]}`)\r\n            // let img = new Image()\r\n            // img.src = `http://10.20.67.111/getPic.action2?ppath=${res.data.path.split(',')[5]}`\r\n            // img.style.cssText = 'width:100%;height:100%;'\r\n            // // this.dieImgSrc=`http://10.20.67.111/getPic.action2?ppath=\\\\${res.data.path.split(',')[5]}`\r\n            // img.onload = () => {\r\n            //   document.querySelector('.imgDie').appendChild(img)\r\n            // }\r\n            // img.onerror = () => {\r\n            //   img.src = require('../../assets/images/404.png')\r\n            //   document.querySelector('.imgDie').appendChild(img)\r\n            // }\r\n          }\r\n        })\r\n\r\n      } else {\r\n        this.dieSwitch = false;\r\n      }\r\n    },\r\n    loginFn(date) {\r\n      // if (this.loginzt) {\r\n\r\n      this.coverImgPaths=[]\r\n\r\n        if (date) {\r\n          this.dieSwitch = true\r\n          let data = {\r\n            'modeName': 'qiangtianqi',\r\n            'eleName': `OBSoverlay:雷达叠加:${this.area}`,\r\n            'forecastTime': date,\r\n            'level': '',\r\n            'userDefinedParas': '',\r\n            'strTime': date,\r\n            'symbol': 1\r\n          }\r\n          const params = new URLSearchParams();\r\n          for (const key in data) {\r\n            params.append(key, data[key]);\r\n          }\r\n          axios.post(`/proxy/10.20.67.111/PictureInfoForgetFilePath.action`, params).then(res => {\r\n            // console.log(res.data.path.split(','))\r\n            this.coverImgPaths.push(`http://10.20.67.111/getPic.action2?ppath=${res.data.path.split(',')[5]}`)\r\n            // let img = new Image()\r\n            // img.src = `http://10.20.67.111/getPic.action2?ppath=${res.data.path.split(',')[5]}`\r\n            // img.style.cssText = 'width:100%;height:100%;'\r\n            // // this.dieImgSrc=`http://10.20.67.111/getPic.action2?ppath=\\\\${res.data.path.split(',')[5]}`\r\n            // img.onload = () => {\r\n            //   document.querySelector('.imgDie').appendChild(img)\r\n            // }\r\n            // img.onerror = () => {\r\n            //   img.src = require('../../assets/images/404.png')\r\n            //   document.querySelector('.imgDie').appendChild(img)\r\n            // }\r\n          })\r\n        }\r\n      // } else {\r\n      //   if (interval && date) {\r\n      //     this.login_data = {\r\n      //       interval, date\r\n      //     }\r\n      //     this.login_switch = true\r\n      //   } else {\r\n      //     this.dieSwitch = false\r\n      //     this.login_switch = false\r\n      //   }\r\n      // }\r\n    },\r\n    // 时间轴时间改变时\r\n    onWholeAgingChange() {\r\n      this.gatherParams();\r\n    },\r\n\r\n    // 关联时间轴时间改变时\r\n    onRelevanceAgingChange(e) {\r\n      // console.log(e);\r\n      if (this.shortTimeElement.type === \"objectives\") {\r\n        this.shortTimeElement.dataType = e.isFcst ? \"预报\" : \"实况\";\r\n        this.shortTimeElement.forecastTime = e.time;\r\n        this.gatherParams();\r\n      }\r\n    },\r\n\r\n    // 短时_客观产品_实况和模式时间选择\r\n    onObjectiveTimeSelect(item) {\r\n      let fcstTime = \"\",\r\n        startTime = \"\";\r\n      const objActTime = this.objectiveActTime,\r\n        objFcstTime = this.objectiveFcst.fcstTime;\r\n      if (objActTime && objActTime.isValid()) {\r\n        fcstTime = objActTime.format(\"YYYY-MM-DD HH:mm:ss\");\r\n      }\r\n      if (objFcstTime && objFcstTime.isValid()) {\r\n        startTime = objFcstTime.format(\"YYYY-MM-DD HH:mm:ss\");\r\n      }\r\n\r\n      if (this.shortTimeElement.type === \"objectives\") {\r\n        this.shortTimeElement.dataType = item.isFcst ? \"预报\" : \"实况\";\r\n        this.shortTimeElement.forecastTime = fcstTime;\r\n        this.shortTimeElement.strTime = startTime;\r\n        this.gatherParams();\r\n      }\r\n    },\r\n\r\n    // 切换tab时\r\n    onTabsChange() {\r\n      if (this.currTabId === \"shortTime\") {\r\n        this.gatherParams(\"fcstServe\");\r\n      } else {\r\n        this.mainImgPaths = [\"\"];\r\n        this.coverImgPaths = [];\r\n      }\r\n      this.gatherParams();\r\n    },\r\n\r\n    // 区域改变时\r\n    onAreaChange() {\r\n      if (this.shortTimeElement.type === \"relation\") {\r\n        this.gatherParams();\r\n      }\r\n    },\r\n\r\n    // 切换图片\r\n    onSwitchImg(sign) {\r\n      if (this.currTabId === \"shortTime\") {\r\n        if (sign === \"left\") {\r\n          this.$refs.relevanceAgingSelect.tuningTime(-1);\r\n        } else if (sign === \"right\") {\r\n          this.$refs.relevanceAgingSelect.tuningTime(1);\r\n        }\r\n      } else {\r\n        if (sign === \"left\") {\r\n          this.$refs.wholeAgingSelect.onTuningAging(-1);\r\n        } else if (sign === \"right\") {\r\n          this.$refs.wholeAgingSelect.onTuningAging(1);\r\n        }\r\n      }\r\n    },\r\n\r\n    // 用户操作短时tab触发的事件(data.type有三个值：'relation': '中分析产品(自动站客观分析)', 'objectives': '客观产品', 'fcstServe': '预报服务')\r\n    onShortTimeChange(data) {\r\n      this.isDisabledRelevance = data.type === \"relation\";\r\n      // 更新关联时间轴上的时间\r\n      if (data.type === \"objectives\") {\r\n        let agingLength = 23;\r\n        //多模式的时候时效长度为23\r\n        if (Array.isArray(data.patterns) && data.patterns.length === 1) {\r\n          const name = data.patterns[0];\r\n          const nameAgingHash = {\r\n            Grapes: 30,\r\n            广东: 36,\r\n            上海: 72,\r\n            上海3KM: 24,\r\n            北京: 36,\r\n            北京3KM: 24,\r\n            广州: 36,\r\n            广州3KM: 12\r\n          };\r\n          agingLength = nameAgingHash[name];\r\n        }\r\n\r\n        // console.log(\"------\");\r\n        // console.log(data);\r\n\r\n        this.objectiveFcst = {\r\n          agingLength,\r\n          startHourList: data.startHourList,\r\n          fcstTime: moment(data.strTime, \"YYYY-MM-DD HH:mm:ss\")\r\n        };\r\n\r\n        // // console.log(agingLength);\r\n        // const latestActTime = moment(data.forecastTime, \"YYYY-MM-DD HH:mm:ss\");\r\n        // const latestFcstTime = moment(data.strTime, \"YYYY-MM-DD HH:mm:ss\");\r\n\r\n        // const fcstConcatList = new Array(agingLength).fill(0).map((el, i) => {\r\n        //   const currTime = latestActTime.clone().add(i + 1, \"hours\");\r\n        //   return {\r\n        //     name: currTime.format(\"HH\"),\r\n        //     time: currTime.format(\"YYYY-MM-DD HH:mm:ss\"),\r\n        //     isFcst: true,\r\n        //     active: false\r\n        //   };\r\n        // });\r\n        // const isHasFcstTime = latestFcstTime.isValid();\r\n        // const fcstNoConcatList = new Array(agingLength).fill(0).map((el, i) => {\r\n        //   if (isHasFcstTime) {\r\n        //     const currTime = latestFcstTime.clone().add(i + 1, \"hours\");\r\n        //     return {\r\n        //       name: \"+\" + (i + 1),\r\n        //       time: currTime.format(\"YYYY-MM-DD HH:mm:ss\"),\r\n        //       isFcst: true,\r\n        //       active: false\r\n        //     };\r\n        //   }\r\n        //   return {\r\n        //     name: \"+\" + (i + 1),\r\n        //     time: \"\",\r\n        //     isFcst: true,\r\n        //     active: false\r\n        //   };\r\n        // });\r\n        // this.concatList = [\r\n        //   ...this.getActTimeList(latestActTime),\r\n        //   ...fcstConcatList\r\n        // ];\r\n        // this.noConcatList = [\r\n        //   ...this.getActTimeList(latestActTime),\r\n        //   ...fcstNoConcatList\r\n        // ];\r\n\r\n        // console.log(this.concatList);\r\n        // console.log(this.noConcatList);\r\n\r\n        // 因为data.forecastTime中的时间始终是初始时间，所以在这需要获取当前关联时间轴上选中的时间，以及\r\n        // 还要同时更新data.dataType\r\n        // const currActiveItem = data.isConcat\r\n        //   ? this.concatList.find(el => el.active)\r\n        //   : this.noConcatList.find(el => el.active);\r\n        // data.forecastTime = currActiveItem.time;\r\n        // data.dataType = currActiveItem.isFcst ? \"预报\" : \"实况\";\r\n      }\r\n\r\n      // 存储用户操作后的结果\r\n      if (data.type === \"fcstServe\") {\r\n        this.shortTimeServe = data;\r\n      } else {\r\n        this.shortTimeElement = data;\r\n        // console.log(this.shortTimeElement);\r\n      }\r\n\r\n      // 将用户操作结果转化为请求接口的参数\r\n      this.gatherParams(data.type);\r\n    },\r\n\r\n    onNearChange(data) {\r\n      this.near = data;\r\n      this.gatherParams();\r\n    },\r\n    onFcstChange(data) {\r\n      this.fcst = data;\r\n      this.gatherParams();\r\n    },\r\n    onSoundingChange(data) {\r\n      this.sounding = data;\r\n      this.gatherParams();\r\n    },\r\n\r\n    // 得到实况时间列表\r\n    getActTimeList(date) {\r\n      return new Array(3)\r\n        .fill(0)\r\n        .map((el, i) => {\r\n          const currTime = date.clone().subtract(i, \"hours\");\r\n          return {\r\n            name: currTime.format(\"HH\"),\r\n            time: currTime.format(\"YYYY-MM-DD HH:mm:ss\"),\r\n            isFcst: false,\r\n            active: i === 0\r\n          };\r\n        })\r\n        .reverse();\r\n    },\r\n\r\n    // 将用户操作结果转化为请求接口的参数\r\n    gatherParams(sign) {\r\n      // 主图列表，覆盖图列表\r\n      let mainParams = [],\r\n        coverParams = [];\r\n      switch (this.currTabId) {\r\n        case \"shortTime\":\r\n          // 预报服务\r\n          if (sign === \"fcstServe\") {\r\n            if (this.shortTimeServe.isHasActive) {\r\n              const { strTime, forecastTime, eleName } = this.shortTimeServe;\r\n              coverParams = [\r\n                {\r\n                  modeName: \"qiangtianqi\",\r\n                  level: \"\",\r\n                  userDefinedParas: \"\",\r\n                  strTime,\r\n                  forecastTime,\r\n                  eleName\r\n                }\r\n              ];\r\n            } else {\r\n              this.coverImgPaths = [];\r\n            }\r\n            break;\r\n          }\r\n\r\n          // 客观产品\r\n          let startTime = \"\";\r\n          const objFcstTime = this.objectiveFcst.fcstTime;\r\n          if (objFcstTime.isValid()) {\r\n            startTime = objFcstTime.format(\"YYYY-MM-DD HH:mm:ss\");\r\n          }\r\n          if (this.shortTimeElement.type === \"objectives\") {\r\n            this.shortTimeElement.strTime = startTime;\r\n          }\r\n          const {\r\n            eleName,\r\n            forecastTime,\r\n            patterns,\r\n            strTime,\r\n            type,\r\n            dataType,\r\n            classifyId\r\n          } = this.shortTimeElement;\r\n\r\n          if (type === \"relation\") {\r\n            mainParams = [\r\n              {\r\n                modeName: \"qiangtianqi\",\r\n                eleName:\r\n                  \"OBSanaly:FenXizidongzhanHB:\" + this.area + \":\" + eleName,\r\n                strTime,\r\n                forecastTime,\r\n                level: \"\",\r\n                userDefinedParas: \"\",\r\n                symbol: \"1\"\r\n              }\r\n            ];\r\n          } else if (type === \"objectives\") {\r\n            if (patterns) {\r\n              mainParams = patterns.map(pt => {\r\n                return {\r\n                  modeName: \"qiangtianqi\",\r\n                  eleName:\r\n                    \"shortandnowcastforecast:shorttimeforecast:\" +\r\n                    dataType +\r\n                    \":\" +\r\n                    (dataType === \"实况\" ? eleName : eleName + \"四面图:\" + pt),\r\n                  strTime: dataType === \"实况\" ? forecastTime : strTime,\r\n                  forecastTime,\r\n                  level: \"\",\r\n                  userDefinedParas: \"\",\r\n                  symbol: \"1\"\r\n                };\r\n              });\r\n            } else {\r\n              mainParams = [\r\n                {\r\n                  modeName: \"qiangtianqi\",\r\n                  eleName:\r\n                    \"shortandnowcastforecast:shorttimeforecast:\" +\r\n                    dataType +\r\n                    \":\" +\r\n                    eleName +\r\n                    (classifyId === \"analyze\" ? \":\" + this.area : \"\"),\r\n                  strTime: dataType === \"实况\" ? forecastTime : strTime,\r\n                  forecastTime,\r\n                  level: \"\",\r\n                  userDefinedParas: \"\",\r\n                  symbol: \"1\"\r\n                }\r\n              ];\r\n            }\r\n          }\r\n          break;\r\n        case \"near\":\r\n          if (!this.near) break;\r\n          this.startTime = this.near.startTime.format(\"YYYY-MM-DD HH\");\r\n          mainParams = [\r\n            {\r\n              modeName: \"qiangtianqi\",\r\n              eleName:\r\n                \"shortandnowcastforecast:shorttimeforecast:预报:\" +\r\n                this.near.elementName +\r\n                \":\" +\r\n                this.area,\r\n              strTime: this.near.startTime.format(\"YYYY-MM-DD HH:mm:ss\"),\r\n              forecastTime: this.near.startTime\r\n                .clone()\r\n                .add(+this.currTabAging.aging, \"hours\")\r\n                .format(\"YYYY-MM-DD HH:mm:ss\"),\r\n              level: \"\",\r\n              userDefinedParas: \"\",\r\n              symbol: \"1\"\r\n            }\r\n          ];\r\n          break;\r\n        case \"sounding\":\r\n          if (!this.sounding) break;\r\n          this.startTime = this.sounding.startTime.format(\"YYYY-MM-DD HH\");\r\n          const sdType = this.sounding.type;\r\n\r\n          let paths = \"http://10.20.67.111/getPic.action2?ppath=\";\r\n          if (sdType === \"act\") {\r\n            paths += `\\\\\\\\10.20.90.82\\\\operation\\\\SWPCImage\\\\ShortTime\\\\TlnP\\\\OBS\\\\TlnP_${\r\n              this.sounding.id\r\n            }_${this.sounding.startTime.format(\"YYYYMMDDHH\")}.png`;\r\n          } else if (sdType === \"fcst\") {\r\n            if (this.sounding.showType === \"NCEP\") {\r\n              paths += `\\\\\\\\10.20.90.82\\\\operation\\\\SWPCImage\\\\ShortTime\\\\TlnP\\\\Forecast\\\\NCEP\\\\Sketch\\\\NCEP_TlnP_${\r\n                this.sounding.id\r\n              }_${this.sounding.startTime.format(\"YYYYMMDDHH\")}_${\r\n                this.currTabAging.aging\r\n              }.png`;\r\n            } else if (this.sounding.showType === \"List\") {\r\n              paths += `\\\\\\\\10.20.90.82\\\\operation\\\\SWPCImage\\\\ShortTime\\\\TlnP\\\\Forecast\\\\NCEP\\\\List\\\\NCEP_TlnP_List_${\r\n                this.sounding.id\r\n              }_${this.sounding.startTime.format(\"YYYYMMDDHH\")}_000_048.png`;\r\n            }\r\n          } else if (sdType === \"fy4\") {\r\n            paths += `D:\\\\operation\\\\FY4OBS\\\\TlnP_${\r\n              this.sounding.id\r\n            }_${this.sounding.startTime.format(\"YYYYMMDDHH\")}_${\r\n              this.currTabAging.aging\r\n            }.png`;\r\n          }\r\n          this.debouncedGetSoundingImgPath(paths);\r\n          return; //退出函数\r\n\r\n        case \"fcst\":\r\n          if (!this.fcst) break;\r\n          this.startTime = this.fcst.startTime.format(\"YYYY-MM-DD HH\");\r\n          mainParams = [\r\n            {\r\n              modeName: \"qiangtianqi\",\r\n              eleName: this.fcst.eleName,\r\n              strTime: this.fcst.startTime.format(\"YYYY-MM-DD HH:mm:ss\"),\r\n              forecastTime: this.fcst.startTime\r\n                .clone()\r\n                .add(+this.currTabAging.aging, \"hours\")\r\n                .format(\"YYYY-MM-DD HH:mm:ss\"),\r\n              level: \"\",\r\n              userDefinedParas: \"\",\r\n              symbol: \"1\"\r\n            }\r\n          ];\r\n          break;\r\n      }\r\n\r\n      if (mainParams.length) {\r\n        this.debouncedRequestMainDatas(\"main\", mainParams);\r\n      }\r\n      if (coverParams.length) {\r\n        this.debouncedRequestCoverDatas(\"cover\", coverParams);\r\n      }\r\n    },\r\n\r\n    // 得到探空图片路径\r\n    getSoundingImgPath(paths) {\r\n      this.mainImgPaths = [paths];\r\n    },\r\n    // 请求数据\r\n    requestDatas(type, params) {\r\n      this.cancelAllRequest(type);\r\n      const CancelToken = axios.CancelToken;\r\n\r\n      const allRequestList = params.map(param => {\r\n        const body = new URLSearchParams();\r\n        for (const key in param) {\r\n          body.append(key, param[key]);\r\n        }\r\n        return axios.post(\r\n          \"/proxy/10.20.67.111/PictureInfoForgetFilePath.action\",\r\n          body,\r\n          {\r\n            cancelToken: new CancelToken(c => {\r\n              if (type === \"main\") {\r\n                this.cancelMainRequests.push(c);\r\n              } else if (type === \"cover\") {\r\n                this.cancelCoverRequests.push(c);\r\n              }\r\n            })\r\n          }\r\n        );\r\n      });\r\n\r\n      axios.all(allRequestList).then(datas => {\r\n        const imgSrcs = datas.map(data => {\r\n          if (!data.data.path) return \"\";\r\n          // [模式名字 要素名字  发布时间  预报时间 层次  文件路径]\r\n          const [\r\n            patternName,\r\n            eleName,\r\n            startTime,\r\n            fcstTime,\r\n            level,\r\n            filePath\r\n          ] = data.data.path.split(\",\");\r\n          return \"http://10.20.67.111/getPic.action2?ppath=\" + filePath;\r\n        });\r\n\r\n        if (type === \"main\") {\r\n          this.mainImgPaths = imgSrcs;\r\n        } else if (type === \"cover\") {\r\n          this.coverImgPaths = imgSrcs;\r\n        }\r\n      });\r\n    },\r\n    // 取消所有请求\r\n    cancelAllRequest(type) {\r\n      if (type === \"main\" && this.cancelMainRequests.length) {\r\n        this.cancelMainRequests.forEach(el => el());\r\n        this.cancelMainRequests = [];\r\n      }\r\n      if (type === \"cover\" && this.cancelCoverRequests.length) {\r\n        this.cancelCoverRequests.forEach(el => el());\r\n        this.cancelCoverRequests = [];\r\n      }\r\n    },\r\n    // 更新时效\r\n    updateAging() {\r\n      if (this.currTabId === \"shortTime\") return;\r\n      const currTabAging = this.tabs.find(tab => tab.id === this.currTabId);\r\n    }\r\n  }\r\n};\r\n"]}]}