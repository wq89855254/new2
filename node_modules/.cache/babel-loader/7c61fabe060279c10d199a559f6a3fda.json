{"remainingRequest":"D:\\program\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\program\\frontend\\src\\views\\verify\\verify.js?vue&type=script&lang=js&","dependencies":[{"path":"D:\\program\\frontend\\src\\views\\verify\\verify.js","mtime":1553855602564},{"path":"D:\\program\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\program\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _slicedToArray from \"D:\\\\program\\\\frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/slicedToArray\";\nimport \"core-js/modules/es6.array.fill\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.regexp.split\";\nimport _parseInt from \"D:\\\\program\\\\frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/parse-int\";\nimport _JSON$stringify from \"D:\\\\program\\\\frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/json/stringify\";\nimport _objectSpread from \"D:\\\\program\\\\frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport * as moment from \"moment\";\nimport * as axios from \"axios\";\nimport _ from 'lodash';\nimport { createNamespacedHelpers } from \"vuex\";\n\nvar _createNamespacedHelp = createNamespacedHelpers(\"synthesis\"),\n    mapState = _createNamespacedHelp.mapState,\n    mapGetters = _createNamespacedHelp.mapGetters,\n    mapMutations = _createNamespacedHelp.mapMutations;\n\nimport options from \"../../assets/config/verify_config\";\nimport { TimeSelect, ImgShow } from \"../../components/share\";\nexport default {\n  name: \"Verify\",\n  components: {\n    TimeSelect: TimeSelect,\n    ImgShow: ImgShow\n  },\n  data: function data() {\n    return {\n      login_switch: true,\n      user: '',\n      pass: '',\n      options: options,\n      zoomSw: false,\n      imgPaths: [],\n      // currFcstName,\n      // options,\n      img_active: false,\n      cancelRequests: [],\n      loginzt: false,\n      dieSwitch: false,\n      area: \"全国\",\n      activeIndex: null,\n      // 当前选中的预报类型\n      currFcstName: \"检验\",\n      // 该引用当前选中的要素配置\n      currEleOption: null,\n      // 该引用当前预报配置\n      currFcstOption: null,\n      // 该引用含有当前起报时间以及当前选中要素的id\n      currTypeOption: null,\n      // 当前选中路径下的所有要素id的列表\n      currEleIdList: []\n    };\n  },\n  mounted: function mounted() {// this.findCondition();\n  },\n  watch: {\n    imgPaths: function imgPaths() {\n      this.updata_zoomUrl(this.imgPaths[0]);\n    }\n  },\n  computed: _objectSpread({}, mapState([\"zoomSwitch\", \"zoomUrl\"]), {\n    // 当前起报时间\n    startTime: function startTime() {\n      if (this.currTypeOption && moment.isMoment(this.currTypeOption.date)) {\n        return this.currTypeOption.date.format('YYYY-MM-DD') + ' ' + this.currTypeOption.hour;\n      }\n\n      return '';\n    },\n    currEleIdListLength: function currEleIdListLength() {\n      return this.currEleIdList.length;\n    }\n  }),\n  created: function created() {\n    this.debouncedFindCondition = _.debounce(this.findCondition, 300);\n  },\n  methods: _objectSpread({}, mapMutations([\"updata_zoomSwitch\", \"updata_zoomUrl\"]), {\n    loginF: function loginF(i) {\n      if (i) {\n        if (this.user && this.pass) {\n          if (this.user == 'swpc' && this.pass == 'swpc') {\n            this.login_switch = false;\n            this.findCondition();\n          } else {\n            alert('用户名或密码错误');\n          }\n        } else {\n          alert('请填写完整');\n        }\n      } else {\n        this.$router.back(-1);\n      }\n    },\n    moment: moment,\n    zoom: function zoom(src) {\n      document.querySelector('.zoomImg').innerHTML = '';\n      this.zoomSw = true;\n      var img = new Image();\n      img.style.height = '100%'; // img.style.width='100%';\n\n      img.src = src[0];\n      document.querySelector('.zoomImg').appendChild(img);\n    },\n    show_zoom: function show_zoom() {\n      this.updata_zoomSwitch(true);\n      this.updata_zoomUrl(this.imgPaths[0]);\n    },\n    close: function close() {\n      this.updata_zoomSwitch(false);\n    },\n    // loginF(i){\n    //   // console.log(i)\n    //   if(i){\n    //     if(this.user=='swpc'&&this.pass=='swpc'){\n    //       this.loginFn(this.interval, moment(this.currDate).add(this.currHour,'hour').format('YYYY-MM-DD HH:mm:ss'))\n    //       this.login_switch=false\n    //     }else{\n    //       alert('用户名或密码错误')\n    //     }\n    //   }else{\n    //     this.login_switch=false\n    //     this.activeIndex=null\n    //   }\n    // },\n    select: function select(i) {\n      if (this.activeIndex == i) {\n        this.activeIndex = null;\n        this.dieSwitch = false; // alert(options[0].contents[0].hour)\n\n        this.currHour = options[0].contents[0].hour;\n        this.loginzt = false;\n      } else {\n        // let value=JSON.parse(JSON.stringify(options[0].contents[0].date))\n        this.currHour = options[0].contents[0].hour;\n        this.currDate = moment(JSON.parse(_JSON$stringify(options[0].contents[0].date)));\n\n        if (i === 1) {\n          this.loginzt = true;\n          this.dieFn(this.interval, moment(this.currDate).format('YYYY-MM-DD HH:mm:ss'));\n        } else {\n          this.login_switch = true;\n          this.loginzt = false;\n        }\n\n        this.activeIndex = i;\n      }\n    },\n    changDate: function changDate(i) {\n      var time = moment(this.currDate.format('YYYYMMDD'), 'YYYYMMDD').add(this.currHour, 'hours');\n\n      if (i === 1) {\n        time.add(_parseInt(this.loginzt ? this.interval : 1), 'hours');\n      } else {\n        time.subtract(_parseInt(this.loginzt ? this.interval : 1), 'hours');\n      }\n\n      this.currDate = time;\n      this.currHour = time.format('HH');\n\n      if (this.activeIndex == 2) {\n        this.loginFn(this.interval, moment(this.currDate).format('YYYY-MM-DD HH:mm:ss'));\n      } else if (this.activeIndex == 1) {\n        this.dieFn(this.interval, moment(this.currDate).format('YYYY-MM-DD HH:mm:ss'));\n      } // this.$emit('dieFn',this.interval,moment(this.currDate).format('YYYY-MM-DD HH:mm:ss'))\n\n    },\n    changeHour: function changeHour() {\n      if (this.activeIndex == 1) {\n        this.dieFn(this.interval, moment(this.currDate).add(this.currHour, 'hour').format('YYYY-MM-DD HH:mm:ss'));\n      } else {\n        this.loginFn(this.interval, moment(this.currDate).add(this.currHour, 'hour').format('YYYY-MM-DD HH:mm:ss'));\n      }\n    },\n    dieFn: function dieFn(interval, date) {\n      document.querySelector('.imgDie').innerHTML = ''; // console.log(interval, date)\n\n      if (interval && date) {\n        this.dieSwitch = true;\n        var data = {\n          'modeName': 'qiangtianqi',\n          'eleName': \"OBSoverlay:\\u5B9E\\u51B5\\u53E0\\u52A0:\".concat(interval),\n          'forecastTime': date,\n          'level': '',\n          'userDefinedParas': '',\n          'strTime': date,\n          'symbol': 1\n        };\n        var params = new URLSearchParams();\n\n        for (var key in data) {\n          params.append(key, data[key]);\n        }\n\n        axios.post(\"/proxy/10.20.67.111/PictureInfoForgetFilePath.action\", params).then(function (res) {\n          // console.log(res.data.path.split(','))\n          var img = new Image();\n          img.src = \"http://10.20.67.111/getPic.action2?ppath=\".concat(res.data.path.split(',')[5]);\n          img.style.cssText = 'width:100%;height:100%;'; // this.dieImgSrc=`http://10.20.67.111/getPic.action2?ppath=\\\\${res.data.path.split(',')[5]}`\n\n          img.onload = function () {\n            document.querySelector('.imgDie').appendChild(img);\n          };\n\n          img.onerror = function () {\n            img.src = require('../../assets/images/404.png');\n            document.querySelector('.imgDie').appendChild(img);\n          };\n        });\n      } else {\n        this.dieSwitch = false;\n      }\n    },\n    loginFn: function loginFn(interval, date) {\n      // if (this.loginzt) {\n      document.querySelector('.imgDie').innerHTML = ''; // console.log(interval, date)\n\n      if (interval && date) {\n        this.dieSwitch = true;\n        var data = {\n          'modeName': 'qiangtianqi',\n          'eleName': \"forecastoverlay:\\u9884\\u62A5\",\n          'forecastTime': date,\n          'level': '',\n          'userDefinedParas': '',\n          'strTime': date,\n          'symbol': 1\n        };\n        var params = new URLSearchParams();\n\n        for (var key in data) {\n          params.append(key, data[key]);\n        }\n\n        axios.post(\"/proxy/10.20.67.111/PictureInfoForgetFilePath.action\", params).then(function (res) {\n          // console.log(res.data.path.split(','))\n          var img = new Image();\n          img.src = \"http://10.20.67.111/getPic.action2?ppath=\".concat(res.data.path.split(',')[5]);\n          img.style.cssText = 'width:100%;height:100%;'; // this.dieImgSrc=`http://10.20.67.111/getPic.action2?ppath=\\\\${res.data.path.split(',')[5]}`\n\n          img.onload = function () {\n            document.querySelector('.imgDie').appendChild(img);\n          };\n\n          img.onerror = function () {\n            img.src = require('../../assets/images/404.png');\n            document.querySelector('.imgDie').appendChild(img);\n          };\n        });\n      } // } else {\n      //   if (interval && date) {\n      //     this.login_data = {\n      //       interval, date\n      //     }\n      //     this.login_switch = true\n      //   } else {\n      //     this.dieSwitch = false\n      //     this.login_switch = false\n      //   }\n      // }\n\n    },\n    loginResult: function loginResult(val) {\n      this.loginzt = val;\n      this.login_switch = false;\n\n      if (val) {\n        document.querySelector('.imgDie').innerHTML = ''; // console.log(interval, date)\n\n        if (this.login_data.interval && this.login_data.date) {\n          this.dieSwitch = true;\n          var data = {\n            'modeName': 'qiangtianqi',\n            'eleName': \"forecastoverlay:\\u9884\\u62A5\",\n            'forecastTime': this.login_data.date,\n            'level': '',\n            'userDefinedParas': '',\n            'strTime': this.login_data.date,\n            'symbol': 1\n          };\n          var params = new URLSearchParams();\n\n          for (var key in data) {\n            params.append(key, data[key]);\n          }\n\n          axios.post(\"/proxy/10.20.67.111/PictureInfoForgetFilePath.action\", params).then(function (res) {\n            // console.log(res.data.path.split(','))\n            var img = new Image();\n            img.src = \"http://10.20.67.111/getPic.action2?ppath=\".concat(res.data.path.split(',')[5]);\n            img.style.cssText = 'width:100%;height:100%;'; // this.dieImgSrc=`http://10.20.67.111/getPic.action2?ppath=\\\\${res.data.path.split(',')[5]}`\n\n            img.onload = function () {\n              document.querySelector('.imgDie').appendChild(img);\n            };\n\n            img.onerror = function () {\n              img.src = require('../../assets/images/404.png');\n              document.querySelector('.imgDie').appendChild(img);\n            };\n          });\n        }\n      }\n    },\n    // 键盘事件监听\n    onKeyup: function onKeyup(event) {\n      var _this = this;\n\n      var code = event.code;\n\n      if (code === 'ArrowLeft') {\n        this.$refs.wholeAgingSelect[0].onTuningAging(-1);\n      } else if (code === 'ArrowRight') {\n        this.$refs.wholeAgingSelect[0].onTuningAging(1);\n      } else if (code === 'ArrowUp' || code === 'ArrowDown') {\n        var activeElementId = '';\n        var isProb = this.currFcstName === '概率预报';\n\n        if (isProb) {\n          activeElementId = this.options.find(function (el) {\n            return el.fcstName === _this.currFcstName;\n          }).activeElementId;\n        } else {\n          activeElementId = this.currTypeOption.activeElementId;\n        }\n\n        var currIndex = this.currEleIdList.findIndex(function (id) {\n          return id === activeElementId;\n        });\n        if (currIndex === -1) return;\n        var nextIndex = currIndex + (code === 'ArrowUp' ? -1 : 1);\n\n        if (nextIndex <= 0) {\n          nextIndex = this.currEleIdListLength - 1;\n        } else if (nextIndex >= this.currEleIdListLength) {\n          nextIndex = 0;\n        }\n\n        var nextActiveElementId = this.currEleIdList[nextIndex];\n\n        if (isProb) {\n          this.options.find(function (el) {\n            return el.fcstName === _this.currFcstName;\n          }).activeElementId = nextActiveElementId;\n        } else {\n          this.currTypeOption.activeElementId = nextActiveElementId;\n        }\n\n        this.debouncedFindCondition();\n      }\n    },\n    // 图片切换事件\n    onSwitchImg: function onSwitchImg(sign) {\n      if (sign === 'left') {\n        this.$refs.wholeAgingSelect[0].onTuningAging(-1);\n      } else if (sign === 'right') {\n        this.$refs.wholeAgingSelect[0].onTuningAging(1);\n      } else if (sign === 'top') {\n        this.$refs.levelSelect.onTuningLevel(1);\n      } else if (sign === 'bottom') {\n        this.$refs.levelSelect.onTuningLevel(-1);\n      }\n    },\n    // 条件改变时\n    onConditionChange: function onConditionChange() {\n      this.debouncedFindCondition();\n    },\n    //点击要素时\n    onClickElement: function onClickElement(curr, itemId) {\n      if (curr.activeElementId === itemId) return;\n      curr.activeElementId = itemId;\n      this.debouncedFindCondition();\n    },\n    // 点击条件时\n    onClickCondition: function onClickCondition(curr, itemName) {\n      if (curr.activeConditionName === itemName) return;\n      curr.activeConditionName = itemName;\n      this.debouncedFindCondition();\n    },\n    // 寻找选中的条件\n    findCondition: function findCondition() {\n      var _this2 = this;\n\n      // alert()\n      var currFcst = this.options.find(function (el) {\n        return el.fcstName === _this2.currFcstName;\n      });\n      this.currfcst = currFcst; // console.log(currFcst);\n\n      var id = currFcst.id;\n      this.currFcstOption = currFcst; // 多模式预报\n\n      if (id === \"verify\") {\n        this.img_active = false;\n        var currContent = currFcst.contents[0]; // currContent.contents.forEach(content => {\n\n        currContent.sections.forEach(function (section) {\n          section.items.forEach(function (el) {\n            if (el.id === currContent.activeElementId) {\n              _this2.currEleOption = el;\n              _this2.currTypeOption = currContent;\n              _this2.currEleIdList = currContent.sections.reduce(function (curr, el) {\n                return curr.concat(el.items.map(function (el) {\n                  return el.id;\n                }));\n              }, []); // console.log(this.currEleIdList);\n              // console.log(currContent.typeName);\n              // console.log(currContent.date);\n              // console.log(currContent.hour);\n              // console.log(el.name);\n              // console.log(el);\n              // body处理\n\n              var strTime = '';\n\n              if (currContent.date) {\n                strTime = currContent.date.format('YYYY-MM-DD') + ' ' + currContent.hour + ':00:00';\n              }\n\n              var forecastTime = '';\n\n              if (strTime) {\n                forecastTime = moment(strTime, 'YYYY-MM-DD HH:mm:ss').add(+currFcst.aging, 'hours').format('YYYY-MM-DD HH:mm:ss');\n              } //verify:检验一:06h\n              // console.\n\n\n              var eleName = [currContent.id, el.name, currFcst.date].join(':');\n              var body = {\n                modeName: 'qiangtianqi',\n                eleName: eleName,\n                forecastTime: forecastTime,\n                level: el.activeLevel,\n                userDefinedParas: '',\n                strTime: strTime // 有起报时间 与 无起报时间(即第一次请求)\n\n              };\n\n              if (strTime) {\n                if (currContent.isStability === true) {\n                  //当稳定性为true\n                  _this2.requestStabilityImgPath(body, currContent);\n                } else {\n                  _this2.requestImgPath(body);\n                }\n              } else {\n                _this2.requestImgPath(body, currContent, currFcst);\n              }\n            }\n          });\n        }); // });\n      }\n    },\n    // 请求图片路径(只针对稳定性)\n    requestStabilityImgPath: function requestStabilityImgPath(body, citeObj) {\n      var _this3 = this;\n\n      // 取消之前的所有未完成的请求\n      this.cancelAllRequest(); // 存储取消时的token\n\n      var CancelToken = axios.CancelToken; // 请求处理\n\n      var h = citeObj.hourList;\n      var agingInterval = citeObj.hourList.length > 1 ? Math.abs(h[1] - h[0]) : 24;\n      var startTime = moment(body.strTime, 'YYYY-MM-DD HH:mm:ss');\n      var requestList = new Array(4).fill(0).map(function (el, i) {\n        var strTime = startTime.clone().subtract(agingInterval * i, 'hours').format('YYYY-MM-DD HH:mm:ss');\n\n        var currBody = _objectSpread({}, body, {\n          strTime: strTime\n        });\n\n        var params = new URLSearchParams();\n\n        for (var key in currBody) {\n          params.append(key, currBody[key]);\n        }\n\n        return axios.post(\"/proxy/10.20.67.111/PictureInfoForgetFilePath.action\", params, {\n          cancelToken: new CancelToken(function (c) {\n            _this3.cancelRequests.push(c);\n          })\n        });\n      }); // 请求数据\n\n      axios.all(requestList).then(function (datas) {\n        _this3.imgPaths = datas.map(function (data) {\n          if (!data.data.path) return '';\n          var path = data.data.path.split(',').pop();\n\n          if (path) {\n            return 'http://10.20.67.111/getPic.action2?ppath=' + path;\n          }\n\n          return '';\n        });\n      });\n    },\n    // 请求图片路径\n    requestImgPath: function requestImgPath(body, timeCiteObj, agingCiteObj) {\n      var _this4 = this;\n\n      // 取消之前的所有未完成的请求\n      this.cancelAllRequest(); // 存储取消时的token\n\n      var CancelToken = axios.CancelToken; // 参数转换\n\n      var params = new URLSearchParams();\n\n      for (var key in body) {\n        params.append(key, body[key]);\n      } // 请求数据\n\n\n      axios.post(\"/proxy/10.20.67.111/PictureInfoForgetFilePath.action\", params, {\n        cancelToken: new CancelToken(function (c) {\n          _this4.cancelRequests.push(c);\n        })\n      }).then(function (data) {\n        if (!data.data.path) {\n          _this4.imgPaths = [''];\n          return;\n        } // [模式名字 要素名字  发布时间  预报时间 层次  文件路径]\n\n\n        var _data$data$path$split = data.data.path.split(','),\n            _data$data$path$split2 = _slicedToArray(_data$data$path$split, 6),\n            patternName = _data$data$path$split2[0],\n            eleName = _data$data$path$split2[1],\n            startTime = _data$data$path$split2[2],\n            fcstTime = _data$data$path$split2[3],\n            level = _data$data$path$split2[4],\n            filePath = _data$data$path$split2[5]; // 第一次请求数据 && 有文件路径返回时\n\n\n        if (timeCiteObj && filePath) {\n          var startT = moment(startTime, 'YYYY-MM-DD HH:mm:ss');\n          var fcstT = moment(fcstTime, 'YYYY-MM-DD HH:mm:ss');\n          var startStamp = startT.unix();\n          var fcstStamp = fcstT.unix();\n\n          var aging = _this4.formatAging((fcstStamp - startStamp) / 60 / 60);\n\n          agingCiteObj.aging = aging;\n          timeCiteObj.date = startT.clone().startOf('day');\n          timeCiteObj.hour = startT.format('HH');\n          _this4.currEleOption.activeLevel = level;\n        }\n\n        _this4.imgPaths = ['http://10.20.67.111/getPic.action2?ppath=' + filePath];\n      });\n    },\n    // 格式化时效\n    formatAging: function formatAging(val) {\n      val += '';\n      var leng = val.length;\n      if (leng === 1) return '00' + val;\n      if (leng === 2) return '0' + val;\n      return val;\n    },\n    // 取消所有请求\n    cancelAllRequest: function cancelAllRequest() {\n      if (this.cancelRequests.length) {\n        this.cancelRequests.forEach(function (el) {\n          return el();\n        });\n        this.cancelRequests = [];\n      }\n    }\n  }),\n  beforeDestroy: function beforeDestroy() {\n    this.cancelAllRequest();\n  }\n};",{"version":3,"sources":["D:\\program\\frontend\\src\\views\\verify\\verify.js"],"names":["moment","axios","_","createNamespacedHelpers","mapState","mapGetters","mapMutations","options","TimeSelect","ImgShow","name","components","data","login_switch","user","pass","zoomSw","imgPaths","img_active","cancelRequests","loginzt","dieSwitch","area","activeIndex","currFcstName","currEleOption","currFcstOption","currTypeOption","currEleIdList","mounted","watch","updata_zoomUrl","computed","startTime","isMoment","date","format","hour","currEleIdListLength","length","created","debouncedFindCondition","debounce","findCondition","methods","loginF","i","alert","$router","back","zoom","src","document","querySelector","innerHTML","img","Image","style","height","appendChild","show_zoom","updata_zoomSwitch","close","select","currHour","contents","currDate","JSON","parse","dieFn","interval","changDate","time","add","subtract","loginFn","changeHour","params","URLSearchParams","key","append","post","then","res","path","split","cssText","onload","onerror","require","loginResult","val","login_data","onKeyup","event","code","$refs","wholeAgingSelect","onTuningAging","activeElementId","isProb","find","el","fcstName","currIndex","findIndex","id","nextIndex","nextActiveElementId","onSwitchImg","sign","levelSelect","onTuningLevel","onConditionChange","onClickElement","curr","itemId","onClickCondition","itemName","activeConditionName","currFcst","currfcst","currContent","sections","forEach","section","items","reduce","concat","map","strTime","forecastTime","aging","eleName","join","body","modeName","level","activeLevel","userDefinedParas","isStability","requestStabilityImgPath","requestImgPath","citeObj","cancelAllRequest","CancelToken","h","hourList","agingInterval","Math","abs","requestList","Array","fill","clone","currBody","cancelToken","c","push","all","datas","pop","timeCiteObj","agingCiteObj","patternName","fcstTime","filePath","startT","fcstT","startStamp","unix","fcstStamp","formatAging","startOf","leng","beforeDestroy"],"mappings":"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","sourcesContent":["import * as moment from \"moment\";\r\nimport * as axios from \"axios\";\r\nimport _ from 'lodash';\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nconst { mapState, mapGetters, mapMutations } = createNamespacedHelpers(\r\n  \"synthesis\"\r\n);\r\nimport options from \"../../assets/config/verify_config\";\r\nimport {\r\n  TimeSelect,\r\n  ImgShow,\r\n} from \"../../components/share\";\r\nexport default {\r\n  name: \"Verify\",\r\n  components: {TimeSelect,ImgShow},\r\n  data: function() {\r\n    return {\r\n      login_switch:true,\r\n      user:'',\r\n      pass:'',\r\n      options,\r\n      zoomSw:false,\r\n      imgPaths:[],\r\n      // currFcstName,\r\n      // options,\r\n      img_active: false,\r\n      cancelRequests: [],\r\n      loginzt: false,dieSwitch:false,\r\n\r\n      area: \"全国\",\r\n      activeIndex: null,\r\n      // 当前选中的预报类型\r\n      currFcstName: \"检验\",\r\n\r\n      // 该引用当前选中的要素配置\r\n      currEleOption: null,\r\n\r\n      // 该引用当前预报配置\r\n      currFcstOption: null,\r\n\r\n      // 该引用含有当前起报时间以及当前选中要素的id\r\n      currTypeOption: null,\r\n\r\n      // 当前选中路径下的所有要素id的列表\r\n      currEleIdList: [],\r\n    };\r\n  },\r\n  mounted: function() {\r\n    // this.findCondition();\r\n  },\r\n  watch:{\r\n    imgPaths(){\r\n      this.updata_zoomUrl(this.imgPaths[0])\r\n    }\r\n  }, \r\n   computed: {\r\n    ...mapState([\"zoomSwitch\",\"zoomUrl\"]),\r\n    // 当前起报时间\r\n    startTime() {\r\n      if (this.currTypeOption && moment.isMoment(this.currTypeOption.date)) {\r\n        return this.currTypeOption.date.format('YYYY-MM-DD') + ' ' + this.currTypeOption.hour;\r\n      }\r\n      return '';\r\n    },\r\n    currEleIdListLength() {\r\n      return this.currEleIdList.length;\r\n    }\r\n  },\r\n  created() {\r\n    this.debouncedFindCondition = _.debounce(this.findCondition, 300);\r\n  }, \r\n  methods: {\r\n    ...mapMutations([\"updata_zoomSwitch\",\"updata_zoomUrl\"]),\r\n    loginF(i){\r\n      if(i){\r\n        if(this.user&&this.pass){\r\n          if(this.user=='swpc'&&this.pass=='swpc'){\r\n            this.login_switch=false\r\n            this.findCondition()\r\n          }else{\r\n            alert('用户名或密码错误')\r\n          }\r\n        }else{\r\n          alert('请填写完整')\r\n        }\r\n      }else{\r\n        this.$router.back(-1)\r\n      }\r\n    }, moment,\r\n    zoom(src){\r\n      document.querySelector('.zoomImg').innerHTML=''\r\n      this.zoomSw=true;\r\n      let img=new Image();\r\n      img.style.height='100%';\r\n      // img.style.width='100%';\r\n      img.src=src[0]\r\n      document.querySelector('.zoomImg').appendChild(img)\r\n    },\r\n    show_zoom(){\r\n      this.updata_zoomSwitch(true)\r\n      this.updata_zoomUrl(this.imgPaths[0])\r\n    },\r\n    close(){\r\n      this.updata_zoomSwitch(false)\r\n    },\r\n    // loginF(i){\r\n    //   // console.log(i)\r\n    //   if(i){\r\n    //     if(this.user=='swpc'&&this.pass=='swpc'){\r\n    //       this.loginFn(this.interval, moment(this.currDate).add(this.currHour,'hour').format('YYYY-MM-DD HH:mm:ss'))\r\n    //       this.login_switch=false\r\n    //     }else{\r\n    //       alert('用户名或密码错误')\r\n    //     }\r\n    //   }else{\r\n    //     this.login_switch=false\r\n    //     this.activeIndex=null\r\n    //   }\r\n    // },\r\n    select(i) {\r\n      if (this.activeIndex == i) {\r\n        this.activeIndex = null\r\n        this.dieSwitch=false\r\n        // alert(options[0].contents[0].hour)\r\n        this.currHour=options[0].contents[0].hour\r\n        this.loginzt=false\r\n      } else {\r\n        // let value=JSON.parse(JSON.stringify(options[0].contents[0].date))\r\n        this.currHour=options[0].contents[0].hour\r\n        this.currDate = moment(JSON.parse(JSON.stringify(options[0].contents[0].date)))\r\n        if (i === 1) {\r\n          this.loginzt=true\r\n          this.dieFn(this.interval, moment(this.currDate).format('YYYY-MM-DD HH:mm:ss'))\r\n        } else {\r\n          this.login_switch=true\r\n          this.loginzt=false\r\n        }\r\n        this.activeIndex = i\r\n      }\r\n    },\r\n    changDate(i) {\r\n      const time = moment(this.currDate.format('YYYYMMDD'), 'YYYYMMDD').add(this.currHour, 'hours');\r\n      if (i === 1) {\r\n        time.add(parseInt(this.loginzt?this.interval:1), 'hours');\r\n      } else {\r\n        time.subtract(parseInt(this.loginzt?this.interval:1), 'hours');\r\n      }\r\n      this.currDate = time;\r\n      this.currHour = time.format('HH');\r\n      if (this.activeIndex == 2) {\r\n        this.loginFn(this.interval, moment(this.currDate).format('YYYY-MM-DD HH:mm:ss'))\r\n      } else if (this.activeIndex == 1) {\r\n        this.dieFn(this.interval, moment(this.currDate).format('YYYY-MM-DD HH:mm:ss'))\r\n      }\r\n      // this.$emit('dieFn',this.interval,moment(this.currDate).format('YYYY-MM-DD HH:mm:ss'))\r\n    },\r\n    changeHour() {\r\n      if(this.activeIndex==1){\r\n        this.dieFn(this.interval, moment(this.currDate).add(this.currHour,'hour').format('YYYY-MM-DD HH:mm:ss'))\r\n      }else{\r\n        this.loginFn(this.interval, moment(this.currDate).add(this.currHour,'hour').format('YYYY-MM-DD HH:mm:ss'))\r\n      }\r\n      \r\n    },\r\n    dieFn(interval, date) {\r\n      document.querySelector('.imgDie').innerHTML = ''\r\n      // console.log(interval, date)\r\n      if (interval && date) {\r\n        this.dieSwitch = true\r\n        let data = {\r\n          'modeName': 'qiangtianqi',\r\n          'eleName': `OBSoverlay:实况叠加:${interval}`,\r\n          'forecastTime': date,\r\n          'level': '',\r\n          'userDefinedParas': '',\r\n          'strTime': date,\r\n          'symbol': 1\r\n        }\r\n        const params = new URLSearchParams();\r\n        for (const key in data) {\r\n          params.append(key, data[key]);\r\n        }\r\n        axios.post(`/proxy/10.20.67.111/PictureInfoForgetFilePath.action`, params).then(res => {\r\n          // console.log(res.data.path.split(','))\r\n          let img = new Image()\r\n          img.src = `http://10.20.67.111/getPic.action2?ppath=${res.data.path.split(',')[5]}`\r\n          img.style.cssText = 'width:100%;height:100%;'\r\n          // this.dieImgSrc=`http://10.20.67.111/getPic.action2?ppath=\\\\${res.data.path.split(',')[5]}`\r\n          img.onload = () => {\r\n            document.querySelector('.imgDie').appendChild(img)\r\n          }\r\n          img.onerror = () => {\r\n            img.src = require('../../assets/images/404.png')\r\n            document.querySelector('.imgDie').appendChild(img)\r\n          }\r\n        })\r\n      } else {\r\n        this.dieSwitch = false\r\n      }\r\n\r\n    },\r\n    loginFn(interval, date) {\r\n      // if (this.loginzt) {\r\n        document.querySelector('.imgDie').innerHTML = ''\r\n        // console.log(interval, date)\r\n        if (interval && date) {\r\n          this.dieSwitch = true\r\n          let data = {\r\n            'modeName': 'qiangtianqi',\r\n            'eleName': `forecastoverlay:预报`,\r\n            'forecastTime': date,\r\n            'level': '',\r\n            'userDefinedParas': '',\r\n            'strTime': date,\r\n            'symbol': 1\r\n          }\r\n          const params = new URLSearchParams();\r\n          for (const key in data) {\r\n            params.append(key, data[key]);\r\n          }\r\n          axios.post(`/proxy/10.20.67.111/PictureInfoForgetFilePath.action`, params).then(res => {\r\n            // console.log(res.data.path.split(','))\r\n            let img = new Image()\r\n            img.src = `http://10.20.67.111/getPic.action2?ppath=${res.data.path.split(',')[5]}`\r\n            img.style.cssText = 'width:100%;height:100%;'\r\n            // this.dieImgSrc=`http://10.20.67.111/getPic.action2?ppath=\\\\${res.data.path.split(',')[5]}`\r\n            img.onload = () => {\r\n              document.querySelector('.imgDie').appendChild(img)\r\n            }\r\n            img.onerror = () => {\r\n              img.src = require('../../assets/images/404.png')\r\n              document.querySelector('.imgDie').appendChild(img)\r\n            }\r\n          })\r\n        }\r\n      // } else {\r\n      //   if (interval && date) {\r\n      //     this.login_data = {\r\n      //       interval, date\r\n      //     }\r\n      //     this.login_switch = true\r\n      //   } else {\r\n      //     this.dieSwitch = false\r\n      //     this.login_switch = false\r\n      //   }\r\n      // }\r\n\r\n    },\r\n    loginResult(val) {\r\n      this.loginzt = val\r\n      this.login_switch = false\r\n      if (val) {\r\n        document.querySelector('.imgDie').innerHTML = ''\r\n        // console.log(interval, date)\r\n        if (this.login_data.interval && this.login_data.date) {\r\n          this.dieSwitch = true\r\n          let data = {\r\n            'modeName': 'qiangtianqi',\r\n            'eleName': `forecastoverlay:预报`,\r\n            'forecastTime': this.login_data.date,\r\n            'level': '',\r\n            'userDefinedParas': '',\r\n            'strTime': this.login_data.date,\r\n            'symbol': 1\r\n          }\r\n          const params = new URLSearchParams();\r\n          for (const key in data) {\r\n            params.append(key, data[key]);\r\n          }\r\n          axios.post(`/proxy/10.20.67.111/PictureInfoForgetFilePath.action`, params).then(res => {\r\n            // console.log(res.data.path.split(','))\r\n            let img = new Image()\r\n            img.src = `http://10.20.67.111/getPic.action2?ppath=${res.data.path.split(',')[5]}`\r\n            img.style.cssText = 'width:100%;height:100%;'\r\n            // this.dieImgSrc=`http://10.20.67.111/getPic.action2?ppath=\\\\${res.data.path.split(',')[5]}`\r\n            img.onload = () => {\r\n              document.querySelector('.imgDie').appendChild(img)\r\n            }\r\n            img.onerror = () => {\r\n              img.src = require('../../assets/images/404.png')\r\n              document.querySelector('.imgDie').appendChild(img)\r\n            }\r\n          })\r\n        }\r\n      }\r\n    },\r\n    // 键盘事件监听\r\n    onKeyup(event) {\r\n      const { code } = event;\r\n      if (code === 'ArrowLeft') {\r\n        this.$refs.wholeAgingSelect[0].onTuningAging(-1);\r\n      } else if (code === 'ArrowRight') {\r\n        this.$refs.wholeAgingSelect[0].onTuningAging(1);\r\n      } else if (code === 'ArrowUp' || code === 'ArrowDown') {\r\n\r\n        let activeElementId = '';\r\n        const isProb = this.currFcstName === '概率预报';\r\n        if (isProb) {\r\n          activeElementId = this.options.find(el => el.fcstName === this.currFcstName).activeElementId;\r\n        } else {\r\n          activeElementId = this.currTypeOption.activeElementId;\r\n        }\r\n        const currIndex = this.currEleIdList.findIndex(id => id === activeElementId);\r\n        if (currIndex === -1) return;\r\n        let nextIndex = currIndex + (code === 'ArrowUp' ? -1 : 1);\r\n        if (nextIndex <= 0) {\r\n          nextIndex = this.currEleIdListLength - 1;\r\n        } else if (nextIndex >= this.currEleIdListLength) {\r\n          nextIndex = 0;\r\n        }\r\n\r\n        const nextActiveElementId = this.currEleIdList[nextIndex];\r\n        if (isProb) {\r\n          this.options.find(el => el.fcstName === this.currFcstName).activeElementId = nextActiveElementId;\r\n        } else {\r\n          this.currTypeOption.activeElementId = nextActiveElementId;\r\n        }\r\n\r\n        this.debouncedFindCondition();\r\n      }\r\n    },\r\n\r\n    // 图片切换事件\r\n    onSwitchImg(sign) {\r\n      if (sign === 'left') {\r\n        this.$refs.wholeAgingSelect[0].onTuningAging(-1);\r\n      } else if (sign === 'right') {\r\n        this.$refs.wholeAgingSelect[0].onTuningAging(1);\r\n      } else if (sign === 'top') {\r\n        this.$refs.levelSelect.onTuningLevel(1);\r\n      } else if (sign === 'bottom') {\r\n        this.$refs.levelSelect.onTuningLevel(-1);\r\n      }\r\n    },\r\n\r\n    // 条件改变时\r\n    onConditionChange() {\r\n      this.debouncedFindCondition();\r\n    },\r\n\r\n    //点击要素时\r\n    onClickElement(curr, itemId) {\r\n      if (curr.activeElementId === itemId) return;\r\n      curr.activeElementId = itemId;\r\n      this.debouncedFindCondition();\r\n    },\r\n\r\n    // 点击条件时\r\n    onClickCondition(curr, itemName) {\r\n      if (curr.activeConditionName === itemName) return;\r\n      curr.activeConditionName = itemName;\r\n      this.debouncedFindCondition();\r\n    },\r\n\r\n    // 寻找选中的条件\r\n    findCondition() {\r\n      // alert()\r\n      const currFcst = this.options.find(\r\n        el => el.fcstName === this.currFcstName\r\n      );\r\n      this.currfcst = currFcst;\r\n      // console.log(currFcst);\r\n      const id = currFcst.id;\r\n\r\n      this.currFcstOption = currFcst;\r\n\r\n      // 多模式预报\r\n      if (id === \"verify\") {\r\n        this.img_active = false\r\n        const currContent = currFcst.contents[0]\r\n        // currContent.contents.forEach(content => {\r\n          currContent.sections.forEach(section => {\r\n            section.items.forEach(el => {\r\n              if (el.id === currContent.activeElementId) {\r\n                this.currEleOption = el;\r\n                this.currTypeOption = currContent;\r\n                this.currEleIdList = currContent.sections.reduce((curr, el) => {\r\n                  return curr.concat(el.items.map(el => el.id));\r\n                }, []);\r\n                // console.log(this.currEleIdList);\r\n                // console.log(currContent.typeName);\r\n                // console.log(currContent.date);\r\n                // console.log(currContent.hour);\r\n                // console.log(el.name);\r\n                // console.log(el);\r\n\r\n                // body处理\r\n                let strTime = '';\r\n                if (currContent.date) {\r\n                  strTime = currContent.date.format('YYYY-MM-DD') + ' ' + currContent.hour + ':00:00';\r\n                }\r\n                let forecastTime = '';\r\n                if (strTime) {\r\n                  forecastTime = moment(strTime, 'YYYY-MM-DD HH:mm:ss').add(+currFcst.aging, 'hours').format('YYYY-MM-DD HH:mm:ss');\r\n                }//verify:检验一:06h\r\n                // console.\r\n                const eleName = [currContent.id, el.name,currFcst.date].join(':');\r\n                const body = {\r\n                  modeName: 'qiangtianqi',\r\n                  eleName,\r\n                  forecastTime,\r\n                  level: el.activeLevel,\r\n                  userDefinedParas: '',\r\n                  strTime\r\n                }\r\n                // 有起报时间 与 无起报时间(即第一次请求)\r\n                if (strTime) {\r\n                  if (currContent.isStability === true) {  //当稳定性为true\r\n                    this.requestStabilityImgPath(body, currContent);\r\n                  } else {\r\n                    this.requestImgPath(body);\r\n                  }\r\n                } else {\r\n                  this.requestImgPath(body, currContent, currFcst);\r\n                }\r\n\r\n              }\r\n            });\r\n          });\r\n        // });\r\n      }\r\n\r\n    },\r\n\r\n    // 请求图片路径(只针对稳定性)\r\n    requestStabilityImgPath(body, citeObj) {\r\n\r\n      // 取消之前的所有未完成的请求\r\n      this.cancelAllRequest();\r\n\r\n      // 存储取消时的token\r\n      const CancelToken = axios.CancelToken;\r\n\r\n      // 请求处理\r\n      const h = citeObj.hourList;\r\n      const agingInterval = citeObj.hourList.length > 1 ? Math.abs(h[1] - h[0]) : 24;\r\n      const startTime = moment(body.strTime, 'YYYY-MM-DD HH:mm:ss');\r\n      const requestList = new Array(4).fill(0).map((el, i) => {\r\n        const strTime = startTime.clone().subtract(agingInterval * i, 'hours').format('YYYY-MM-DD HH:mm:ss');\r\n        const currBody = { ...body, strTime };\r\n        const params = new URLSearchParams();\r\n        for (const key in currBody) {\r\n          params.append(key, currBody[key]);\r\n        }\r\n        return axios.post(\"/proxy/10.20.67.111/PictureInfoForgetFilePath.action\", params, {\r\n          cancelToken: new CancelToken(c => {\r\n            this.cancelRequests.push(c);\r\n          })\r\n        });\r\n      });\r\n\r\n      // 请求数据\r\n      axios.all(requestList).then(datas => {\r\n        this.imgPaths = datas.map(data => {\r\n          if (!data.data.path) return '';\r\n          const path = data.data.path.split(',').pop();\r\n          if (path) {\r\n            return 'http://10.20.67.111/getPic.action2?ppath=' + path;\r\n          }\r\n          return '';\r\n        });\r\n      })\r\n\r\n    },\r\n\r\n\r\n    // 请求图片路径\r\n    requestImgPath(body, timeCiteObj, agingCiteObj) {\r\n\r\n      // 取消之前的所有未完成的请求\r\n      this.cancelAllRequest();\r\n\r\n      // 存储取消时的token\r\n      const CancelToken = axios.CancelToken;\r\n\r\n      // 参数转换\r\n      const params = new URLSearchParams();\r\n      for (const key in body) {\r\n        params.append(key, body[key]);\r\n      }\r\n\r\n      // 请求数据\r\n      axios.post(\"/proxy/10.20.67.111/PictureInfoForgetFilePath.action\", params, {\r\n        cancelToken: new CancelToken(c => {\r\n          this.cancelRequests.push(c);\r\n        })\r\n      }).then(data => {\r\n\r\n        if (!data.data.path) {\r\n          this.imgPaths = [''];\r\n          return;\r\n        }\r\n\r\n        // [模式名字 要素名字  发布时间  预报时间 层次  文件路径]\r\n        const [patternName, eleName, startTime, fcstTime, level, filePath] = data.data.path.split(',');\r\n\r\n        // 第一次请求数据 && 有文件路径返回时\r\n        if (timeCiteObj && filePath) {\r\n          const startT = moment(startTime, 'YYYY-MM-DD HH:mm:ss');\r\n          const fcstT = moment(fcstTime, 'YYYY-MM-DD HH:mm:ss');\r\n          const startStamp = startT.unix();\r\n          const fcstStamp = fcstT.unix();\r\n          const aging = this.formatAging((fcstStamp - startStamp) / 60 / 60);\r\n          agingCiteObj.aging = aging;\r\n          timeCiteObj.date = startT.clone().startOf('day');\r\n          timeCiteObj.hour = startT.format('HH');\r\n          this.currEleOption.activeLevel = level;\r\n        }\r\n        this.imgPaths = ['http://10.20.67.111/getPic.action2?ppath=' + filePath];\r\n      })\r\n    },\r\n\r\n    // 格式化时效\r\n    formatAging(val) {\r\n      val += '';\r\n      const leng = val.length;\r\n      if (leng === 1) return '00' + val;\r\n      if (leng === 2) return '0' + val;\r\n      return val;\r\n    },\r\n\r\n    // 取消所有请求\r\n    cancelAllRequest() {\r\n      if (this.cancelRequests.length) {\r\n        this.cancelRequests.forEach(el => el());\r\n        this.cancelRequests = [];\r\n      }\r\n  }\r\n  },\r\n\r\n  beforeDestroy() {\r\n    this.cancelAllRequest();\r\n  },\r\n};"]}]}